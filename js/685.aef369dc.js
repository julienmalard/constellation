(self["webpackChunkconstellation"]=self["webpackChunkconstellation"]||[]).push([[685],{4623:function(t,e,i){"use strict";i.d(e,{Z:function(){return c}});i(57658);var s=i(33485),a=i(76394),r=(0,a.Ji)("v-breadcrumbs__divider","li"),n=i(28639),o=i(4898),c=(0,o.Z)(n.Z).extend({name:"v-breadcrumbs",props:{divider:{type:String,default:"/"},items:{type:Array,default:()=>[]},large:Boolean},computed:{classes(){return{"v-breadcrumbs--large":this.large,...this.themeClasses}}},methods:{genDivider(){return this.$createElement(r,this.$slots.divider?this.$slots.divider:this.divider)},genItems(){const t=[],e=!!this.$scopedSlots.item,i=[];for(let a=0;a<this.items.length;a++){const r=this.items[a];i.push(r.text),e?t.push(this.$scopedSlots.item({item:r})):t.push(this.$createElement(s.Z,{key:i.join("."),props:r},[r.text])),a<this.items.length-1&&t.push(this.genDivider())}return t}},render(t){const e=this.$slots.default||this.genItems();return t("ul",{staticClass:"v-breadcrumbs",class:this.classes},e)}})},33485:function(t,e,i){"use strict";var s=i(29903),a=i(4898);e["Z"]=(0,a.Z)(s.Z).extend({name:"v-breadcrumbs-item",props:{activeClass:{type:String,default:"v-breadcrumbs__item--disabled"},ripple:{type:[Boolean,Object],default:!1}},computed:{classes(){return{"v-breadcrumbs__item":!0,[this.activeClass]:this.disabled}}},render(t){const{tag:e,data:i}=this.generateRouteLink();return t("li",[t(e,{...i,attrs:{...i.attrs,"aria-current":this.isActive&&this.isLink?"page":void 0}},this.$slots.default)])}})},36196:function(t,e,i){"use strict";i.a(t,(async function(t){i(21703);var s=i(40326),a=i(42947),r=i(84105),n=i(33053),o=i.n(n),c=i(94363),l=i(71378),u=t([c]);c=(u.then?await u:u)[0],e["Z"]=(0,s.Z)(l.Z).extend({name:"dialogueTélécharger",props:["id","type"],mixins:[l.Z],data:function(){return{dialogue:!1,"enProgrès":!1,formatDoc:"ods","inclureMédias":!1,languesPourExportation:[]}},mounted:function(){this.languesPourExportation=this.languesPréférées},methods:{"codeÀNomLangue":a.t1,enleverLangue:function(t){const e=this.languesPourExportation.indexOf(t);e>=0&&this.languesPourExportation.splice(e,1)},"télécharger":async function(){this.enProgrès=!0;const t={xls:"biff8"},e=t[this.formatDoc]||this.formatDoc,i=async t=>{const{doc:i,fichiersSFIP:s,nomFichier:a}=t;if(this.inclureMédias){const t={octets:(0,r.op)(i,{bookType:e,type:"buffer"}),nom:`${a}.${this.formatDoc}`},n=await Promise.all([...s].map((async t=>({nom:`${t.cid}.${t.ext}`,octets:await o()(this.$ipa.obtItérableAsyncSFIP({id:t.cid}))}))));await c.P6.zipper([t],n,a)}else(0,r.NC)(i,`${a}.${this.formatDoc}`,{bookType:e})},s=async t=>{const{docs:i,fichiersSFIP:s,nomFichier:a}=t,n=i.map((t=>({nom:`${t.nom}.${this.formatDoc}`,octets:(0,r.op)(t.doc,{bookType:e,type:"buffer"})}))),l=this.inclureMédias?await Promise.all([...s].map((async t=>({nom:`${t.cid}.${t.ext}`,octets:await o()(this.$ipa.obtItérableAsyncSFIP({id:t.cid}))})))):[];await c.P6.zipper(n,l,a)};try{switch(this.type){case"bd":{const t=await this.$ipa.bds.exporterDonnées({id:this.id,langues:this.languesPourExportation});await i(t);break}case"tableau":{const t=await this.$ipa.tableaux.exporterDonnées({idTableau:this.id,langues:this.languesPourExportation});await i(t);break}case"projet":{const t=await this.$ipa.projets.exporterDonnées({id:this.id,langues:this.languesPourExportation});await s(t);break}default:throw new Error(`"${this.type}" inconnu`)}}catch{}this.dialogue=!1,this.enProgrès=!1}}})}))},90634:function(t,e,i){"use strict";i.a(t,(async function(t){var s=i(58708),a=i(24168),r=i(43736),n=t([a]);a=(n.then?await n:n)[0];var o=(0,r.Z)(a.Z,s.s,s.x,!1,null,null,null);e["Z"]=o.exports}))},92920:function(t,e,i){"use strict";i.d(e,{Z:function(){return P}});var s=i(85526),a=i(6348),r=i(56653),n=i(44666),o=i(46447),c=i(4898),l=i(6237),u=(0,c.Z)(n.Z,o.Z).extend({name:"v-hover",props:{disabled:{type:Boolean,default:!1},value:{type:Boolean,default:void 0}},methods:{onMouseEnter(){this.runDelay("open")},onMouseLeave(){this.runDelay("close")}},render(){if(!this.$scopedSlots.default&&void 0===this.value)return(0,l.Kd)("v-hover is missing a default scopedSlot or bound value",this),null;let t;return this.$scopedSlots.default&&(t=this.$scopedSlots.default({hover:this.isActive})),Array.isArray(t)&&1===t.length&&(t=t[0]),t&&!Array.isArray(t)&&t.tag?(this.disabled||(t.data=t.data||{},this._g(t.data,{mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})),t):((0,l.Kd)("v-hover should only contain a single element",this),t)}}),d=i(7656),h=i(55051),f=i(69096),m=i(36458),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(f.Z,{staticClass:"mt-3 text-center"},[e("input",{ref:"choixFichier",staticStyle:{display:"none"},attrs:{type:"file",accept:"image/*"},on:{change:t.imageChoisie}}),e(m.Z,{attrs:{timeout:"5000",color:"error",outlined:""},scopedSlots:t._u([{key:"action",fn:function({attrs:i}){return[e(a.Z,t._b({attrs:{icon:""},on:{click:function(e){t.fichierTropGrand=!1}}},"v-btn",i,!1),[e(d.Z,[t._v("mdi-close")])],1)]}}]),model:{value:t.fichierTropGrand,callback:function(e){t.fichierTropGrand=e},expression:"fichierTropGrand"}},[t._v(" "+t._s(t.$t("compte.onglets.compte.பட_அளவு"))+" ")]),e(r.Z,{attrs:{cols:"12"}},[e(u,{attrs:{disable:!t.editable},scopedSlots:t._u([{key:"default",fn:function({hover:i}){return[e(s.Z,{staticClass:"mb-3",attrs:{size:"175",elevation:i?12:2}},[e(h.Z,{attrs:{src:t.srcImage,contain:""}},[e(f.Z,{class:{"on-hover":i,"align-self-center":!0,"fill-height":!0,"flex-column":!0,fond:!0},staticStyle:{"background-color":"black"}},[e("div",{staticClass:"align-self-center",staticStyle:{height:"100%"}},[e(f.Z,{staticClass:"flex-column fill-height ma-0"},[e("div",{staticClass:"my-auto"},[e(a.Z,{staticClass:"align-self-center",class:{"show-btns":i,"mx-2":!0},attrs:{color:"rgba(255, 255, 255, 0)",icon:"",large:""},on:{click:t.choisirImage}},[e(d.Z,{class:{"show-btns":i},attrs:{color:"rgba(255, 255, 255, 0)",large:""}},[t._v(" mdi-camera-outline ")])],1),e(a.Z,{staticClass:"align-self-center",class:{"show-btns":i,"mx-2":!0},attrs:{color:"rgba(255, 255, 255, 0)",icon:"",large:""},on:{click:t.effacerImage}},[e(d.Z,{class:{"show-btns":i},attrs:{color:"rgba(255, 255, 255, 0)",large:""}},[t._v(" mdi-close ")])],1)],1)])],1)])],1)],1)]}}])})],1)],1)},g=[],v=i(40326),b=i(97840),y=i(40620),x=i.n(y);const Z=t=>new Promise((e=>{const i=URL.createObjectURL(t),s=new Image;s.onload=()=>{e({hauteur:s.height,largeur:s.width})},s.src=i}));var _=(0,v.Z)(b.Z).extend({name:"ImageÉditable",mixins:[b.Z],props:{srcImage:{type:String},MAX_TAILLE_IMAGE:{type:Number},editable:{type:Boolean}},data:function(){return{fichierTropGrand:!1}},methods:{choisirImage:async function(){const t=this.$refs.choixFichier;t.click()},effacerImage:async function(){await this.$emit("effacerImage")},imageChoisie:async function(){var t;const e=this.$refs.choixFichier;if(null===(t=e.files)||void 0===t||!t.length)return;const i=e.files[0];let s;if(i.size>this.MAX_TAILLE_IMAGE){const{hauteur:t,largeur:e}=await Z(i),a=t*e*16/8192/this.MAX_TAILLE_IMAGE;try{const r=await x()({file:i,height:a*t,width:a*e});if(r.size>this.MAX_TAILLE_IMAGE)return void(this.fichierTropGrand=!0);this.fichierTropGrand=!1,s=await r.arrayBuffer()}catch{return void(this.fichierTropGrand=!0)}}else s=await i.arrayBuffer(),this.fichierTropGrand=!1;await this.$emit("imageChoisie",{"données":s})}}}),w=_,$=i(43736),k=(0,$.Z)(w,p,g,!1,null,"ee880fa2",null),P=k.exports},90725:function(t,e,i){"use strict";i.d(e,{Z:function(){return v}});var s=i(69165),a=i(7656),r=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("dialogue-info-variable",{attrs:{id:t.id},scopedSlots:t._u([{key:"activator",fn:function({on:i,attrs:r}){return[e(s.Z,t._g(t._b({staticClass:"mx-1 my-1",attrs:{outlined:"",label:"",small:""}},"v-chip",r,!1),i),[t.catégorie?e(a.Z,{attrs:{left:"",small:""}},[t._v(t._s(t.icôneCatégorie))]):t._e(),e("texteTronqué",{attrs:{texte:t.nom,longueurMax:t.longueur}})],1)]}}])})},n=[],o=i(40326),c=i(69698),l=i(19381),u=i(60724),d=i(4497),h=i(71378),f=(0,o.Z)(d.Z,h.Z).extend({name:"jetonVariable",props:{longueur:{type:Number,default:10},id:String},components:{dialogueInfoVariable:l.Z,"texteTronqué":u.Z},mixins:[h.Z,d.Z],data:function(){return{noms:{},"catégorie":void 0}},computed:{nom:function(){return Object.keys(this.noms).length?(0,c.BK)(this.noms,this.languesPréférées):this.id.replace(/^\/orbitdb\//,"")},"icôneCatégorie":function(){if(this.catégorie)return(0,c.cA)(this.catégorie)}},watch:{id:function(){this.réInitialiserSuivi()}},methods:{initialiserSuivi:async function(){const t=await this.$ipa.variables.suivreNomsVariable({id:this.id,f:t=>{this.noms=t}}),e=await this.$ipa.variables.suivreCatégorieVariable({id:this.id,f:t=>{this.catégorie=t}});this.suivre([t,e])}}}),m=f,p=i(43736),g=(0,p.Z)(m,r,n,!1,null,null,null),v=g.exports},24168:function(t,e,i){"use strict";i.a(t,(async function(t){var s=i(36196),a=t([s]);s=(a.then?await a:a)[0],e["Z"]=s.Z}))},40620:function(t,e,i){var s=i(25108);t.exports=function({file:t,width:e,height:i,type:a}){return new Promise((function(r,n){let o=["jpg","gif","bmp","png","jpeg","svg"];try{if(t.name&&t.name.split(".").reverse()[0]&&o.includes(t.name.split(".").reverse()[0].toLowerCase())&&t.size&&t.type){let s=a||"jpeg";const o=e||500,c=i||300,l=t.name,u=new FileReader;u.readAsDataURL(t),u.onload=t=>{const e=new Image;e.src=t.target.result,e.onload=()=>{const t=document.createElement("canvas");t.width=o,t.height=c;const i=t.getContext("2d");i.drawImage(e,0,0,o,c),i.canvas.toBlob((t=>{const e=new File([t],l,{type:`image/${s.toLowerCase()}`,lastModified:Date.now()});r(e)}),"image/jpeg",1)},u.onerror=t=>n(t)}}else n("File not supported!")}catch(c){s.log("Error while image resize: ",c),n(c)}}))}},58708:function(t,e,i){"use strict";i.d(e,{s:function(){return p},x:function(){return g}});var s=i(46435),a=i(6348),r=i(35173),n=i(86283),o=i(38623),c=i(69165),l=i(70060),u=i(7186),d=i(7656),h=i(4140),f=i(25729),m=i(62067),p=function(){var t=this,e=t._self._c;t._self._setupProxy;return e(l.Z,{attrs:{scrollable:"","max-width":"600"},scopedSlots:t._u([{key:"activator",fn:function({on:e,attrs:i}){return[t._t("activator",null,null,{on:e,attrs:i})]}}],null,!0),model:{value:t.dialogue,callback:function(e){t.dialogue=e},expression:"dialogue"}},[e(r.Z,[e(n.EB,{staticClass:"headline mb-3"},[t._v(" "+t._s(t.$t("exporter.titre"))+" "),e(m.Z),e(a.Z,{attrs:{icon:""},on:{click:function(e){t.dialogue=!1,t.enProgrès=!1}}},[e(d.Z,[t._v("mdi-close")])],1)],1),e(u.Z),e(n.ZB,{staticClass:"mt-3 py-2"},[e(f.Z,{attrs:{outlined:"",dense:"","hide-details":"",label:t.$t("exporter.formatFichier"),items:["ods","csv","txt","xls","xlsx"]},model:{value:t.formatDoc,callback:function(e){t.formatDoc=e},expression:"formatDoc"}}),e(o.Z,{attrs:{label:t.$t("exporter.inclureMédias")},model:{value:t.inclureMédias,callback:function(e){t.inclureMédias=e},expression:"inclureMédias"}}),e(s.Z,{attrs:{items:t.langues,label:t.$t("exporter.langues"),outlined:"",multiple:""},scopedSlots:t._u([{key:"selection",fn:function(i){return[e(c.Z,t._b({attrs:{"input-value":i.selected,close:""},on:{click:i.select,"click:close":function(e){return t.enleverLangue(i.item)}}},"v-chip",i.attrs,!1),[t._v(" "+t._s(t.codeÀNomLangue(i.item)||i.item)+" ")])]}},{key:"item",fn:function(i){return[e(h.km,[e(h.V9,[t._v(t._s(t.codeÀNomLangue(i.item)||i.item))])],1)]}}]),model:{value:t.languesPourExportation,callback:function(e){t.languesPourExportation=e},expression:"languesPourExportation"}})],1),e(u.Z),e(n.h7,[e(m.Z),e(a.Z,{attrs:{color:"secondary",text:"",outlined:""},on:{click:function(e){t.dialogue=!1}}},[t._v(" "+t._s(t.$t("communs.fermer"))+" ")]),e(a.Z,{attrs:{color:"primary",text:"",outlined:"",loading:t.enProgrès},on:{click:()=>t.télécharger()}},[t._v(" "+t._s(t.$t("communs.télécharger"))+" "),e(d.Z,{attrs:{right:""}},[t._v("mdi-download")])],1)],1)],1)],1)},g=[]}}]);