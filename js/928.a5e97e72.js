(self["webpackChunkconstellation"]=self["webpackChunkconstellation"]||[]).push([[928],{75215:function(t,e){(function(){var e,n=0xdeadbeefcafe,r=15715070==(16777215&n);function s(t,e,n){null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))}function o(){return new s(null)}function i(t,e,n,r,s,o){while(--o>=0){var i=e*this[t++]+n[r]+s;s=Math.floor(i/67108864),n[r++]=67108863&i}return s}function c(t,e,n,r,s,o){var i=32767&e,c=e>>15;while(--o>=0){var a=32767&this[t],u=this[t++]>>15,d=c*a+u*i;a=i*a+((32767&d)<<15)+n[r]+(1073741823&s),s=(a>>>30)+(d>>>15)+c*u+(s>>>30),n[r++]=1073741823&a}return s}function a(t,e,n,r,s,o){var i=16383&e,c=e>>14;while(--o>=0){var a=16383&this[t],u=this[t++]>>14,d=c*a+u*i;a=i*a+((16383&d)<<14)+n[r]+s,s=(a>>28)+(d>>14)+c*u,n[r++]=268435455&a}return s}var u="undefined"!==typeof navigator;u&&r&&"Microsoft Internet Explorer"==navigator.appName?(s.prototype.am=c,e=30):u&&r&&"Netscape"!=navigator.appName?(s.prototype.am=i,e=26):(s.prototype.am=a,e=28),s.prototype.DB=e,s.prototype.DM=(1<<e)-1,s.prototype.DV=1<<e;var d=52;s.prototype.FV=Math.pow(2,d),s.prototype.F1=d-e,s.prototype.F2=2*e-d;var h,l,p="0123456789abcdefghijklmnopqrstuvwxyz",f=new Array;for(h="0".charCodeAt(0),l=0;l<=9;++l)f[h++]=l;for(h="a".charCodeAt(0),l=10;l<36;++l)f[h++]=l;for(h="A".charCodeAt(0),l=10;l<36;++l)f[h++]=l;function g(t){return p.charAt(t)}function y(t,e){var n=f[t.charCodeAt(e)];return null==n?-1:n}function m(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function b(t){this.t=1,this.s=t<0?-1:0,t>0?this[0]=t:t<-1?this[0]=t+this.DV:this.t=0}function w(t){var e=o();return e.fromInt(t),e}function v(t,e){var n;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void this.fromRadix(t,e);n=2}this.t=0,this.s=0;var r=t.length,o=!1,i=0;while(--r>=0){var c=8==n?255&t[r]:y(t,r);c<0?"-"==t.charAt(r)&&(o=!0):(o=!1,0==i?this[this.t++]=c:i+n>this.DB?(this[this.t-1]|=(c&(1<<this.DB-i)-1)<<i,this[this.t++]=c>>this.DB-i):this[this.t-1]|=c<<i,i+=n,i>=this.DB&&(i-=this.DB))}8==n&&0!=(128&t[0])&&(this.s=-1,i>0&&(this[this.t-1]|=(1<<this.DB-i)-1<<i)),this.clamp(),o&&s.ZERO.subTo(this,this)}function E(){var t=this.s&this.DM;while(this.t>0&&this[this.t-1]==t)--this.t}function I(t){if(this.s<0)return"-"+this.negate().toString(t);var e;if(16==t)e=4;else if(8==t)e=3;else if(2==t)e=1;else if(32==t)e=5;else{if(4!=t)return this.toRadix(t);e=2}var n,r=(1<<e)-1,s=!1,o="",i=this.t,c=this.DB-i*this.DB%e;if(i-- >0){c<this.DB&&(n=this[i]>>c)>0&&(s=!0,o=g(n));while(i>=0)c<e?(n=(this[i]&(1<<c)-1)<<e-c,n|=this[--i]>>(c+=this.DB-e)):(n=this[i]>>(c-=e)&r,c<=0&&(c+=this.DB,--i)),n>0&&(s=!0),s&&(o+=g(n))}return s?o:"0"}function T(){var t=o();return s.ZERO.subTo(this,t),t}function A(){return this.s<0?this.negate():this}function S(t){var e=this.s-t.s;if(0!=e)return e;var n=this.t;if(e=n-t.t,0!=e)return this.s<0?-e:e;while(--n>=0)if(0!=(e=this[n]-t[n]))return e;return 0}function B(t){var e,n=1;return 0!=(e=t>>>16)&&(t=e,n+=16),0!=(e=t>>8)&&(t=e,n+=8),0!=(e=t>>4)&&(t=e,n+=4),0!=(e=t>>2)&&(t=e,n+=2),0!=(e=t>>1)&&(t=e,n+=1),n}function _(){return this.t<=0?0:this.DB*(this.t-1)+B(this[this.t-1]^this.s&this.DM)}function D(t,e){var n;for(n=this.t-1;n>=0;--n)e[n+t]=this[n];for(n=t-1;n>=0;--n)e[n]=0;e.t=this.t+t,e.s=this.s}function L(t,e){for(var n=t;n<this.t;++n)e[n-t]=this[n];e.t=Math.max(this.t-t,0),e.s=this.s}function R(t,e){var n,r=t%this.DB,s=this.DB-r,o=(1<<s)-1,i=Math.floor(t/this.DB),c=this.s<<r&this.DM;for(n=this.t-1;n>=0;--n)e[n+i+1]=this[n]>>s|c,c=(this[n]&o)<<r;for(n=i-1;n>=0;--n)e[n]=0;e[i]=c,e.t=this.t+i+1,e.s=this.s,e.clamp()}function U(t,e){e.s=this.s;var n=Math.floor(t/this.DB);if(n>=this.t)e.t=0;else{var r=t%this.DB,s=this.DB-r,o=(1<<r)-1;e[0]=this[n]>>r;for(var i=n+1;i<this.t;++i)e[i-n-1]|=(this[i]&o)<<s,e[i-n]=this[i]>>r;r>0&&(e[this.t-n-1]|=(this.s&o)<<s),e.t=this.t-n,e.clamp()}}function O(t,e){var n=0,r=0,s=Math.min(t.t,this.t);while(n<s)r+=this[n]-t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){r-=t.s;while(n<this.t)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<t.t)r-=t[n],e[n++]=r&this.DM,r>>=this.DB;r-=t.s}e.s=r<0?-1:0,r<-1?e[n++]=this.DV+r:r>0&&(e[n++]=r),e.t=n,e.clamp()}function k(t,e){var n=this.abs(),r=t.abs(),o=n.t;e.t=o+r.t;while(--o>=0)e[o]=0;for(o=0;o<r.t;++o)e[o+n.t]=n.am(0,r[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&s.ZERO.subTo(e,e)}function M(t){var e=this.abs(),n=t.t=2*e.t;while(--n>=0)t[n]=0;for(n=0;n<e.t-1;++n){var r=e.am(n,e[n],t,2*n,0,1);(t[n+e.t]+=e.am(n+1,2*e[n],t,2*n+1,r,e.t-n-1))>=e.DV&&(t[n+e.t]-=e.DV,t[n+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(n,e[n],t,2*n,0,1)),t.s=0,t.clamp()}function N(t,e,n){var r=t.abs();if(!(r.t<=0)){var i=this.abs();if(i.t<r.t)return null!=e&&e.fromInt(0),void(null!=n&&this.copyTo(n));null==n&&(n=o());var c=o(),a=this.s,u=t.s,d=this.DB-B(r[r.t-1]);d>0?(r.lShiftTo(d,c),i.lShiftTo(d,n)):(r.copyTo(c),i.copyTo(n));var h=c.t,l=c[h-1];if(0!=l){var p=l*(1<<this.F1)+(h>1?c[h-2]>>this.F2:0),f=this.FV/p,g=(1<<this.F1)/p,y=1<<this.F2,m=n.t,b=m-h,w=null==e?o():e;c.dlShiftTo(b,w),n.compareTo(w)>=0&&(n[n.t++]=1,n.subTo(w,n)),s.ONE.dlShiftTo(h,w),w.subTo(c,c);while(c.t<h)c[c.t++]=0;while(--b>=0){var v=n[--m]==l?this.DM:Math.floor(n[m]*f+(n[m-1]+y)*g);if((n[m]+=c.am(0,v,n,b,0,h))<v){c.dlShiftTo(b,w),n.subTo(w,n);while(n[m]<--v)n.subTo(w,n)}}null!=e&&(n.drShiftTo(h,e),a!=u&&s.ZERO.subTo(e,e)),n.t=h,n.clamp(),d>0&&n.rShiftTo(d,n),a<0&&s.ZERO.subTo(n,n)}}}function P(t){var e=o();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(s.ZERO)>0&&t.subTo(e,e),e}function C(t){this.m=t}function x(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function $(t){return t}function q(t){t.divRemTo(this.m,null,t)}function F(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function j(t,e){t.squareTo(e),this.reduce(e)}function V(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function H(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function X(t){var e=o();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(s.ZERO)>0&&this.m.subTo(e,e),e}function z(t){var e=o();return t.copyTo(e),this.reduce(e),e}function G(t){while(t.t<=this.mt2)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var n=32767&t[e],r=n*this.mpl+((n*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;n=e+this.m.t,t[n]+=this.m.am(0,r,t,e,0,this.m.t);while(t[n]>=t.DV)t[n]-=t.DV,t[++n]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function Y(t,e){t.squareTo(e),this.reduce(e)}function K(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function Z(){return 0==(this.t>0?1&this[0]:this.s)}function Q(t,e){if(t>4294967295||t<1)return s.ONE;var n=o(),r=o(),i=e.convert(this),c=B(t)-1;i.copyTo(n);while(--c>=0)if(e.sqrTo(n,r),(t&1<<c)>0)e.mulTo(r,i,n);else{var a=n;n=r,r=a}return e.revert(n)}function W(t,e){var n;return n=t<256||e.isEven()?new C(e):new H(e),this.exp(t,n)}function J(){var t=o();return this.copyTo(t),t}function tt(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function et(){return 0==this.t?this.s:this[0]<<24>>24}function nt(){return 0==this.t?this.s:this[0]<<16>>16}function rt(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function st(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function ot(t){if(null==t&&(t=10),0==this.signum()||t<2||t>36)return"0";var e=this.chunkSize(t),n=Math.pow(t,e),r=w(n),s=o(),i=o(),c="";this.divRemTo(r,s,i);while(s.signum()>0)c=(n+i.intValue()).toString(t).substr(1)+c,s.divRemTo(r,s,i);return i.intValue().toString(t)+c}function it(t,e){this.fromInt(0),null==e&&(e=10);for(var n=this.chunkSize(e),r=Math.pow(e,n),o=!1,i=0,c=0,a=0;a<t.length;++a){var u=y(t,a);u<0?"-"==t.charAt(a)&&0==this.signum()&&(o=!0):(c=e*c+u,++i>=n&&(this.dMultiply(r),this.dAddOffset(c,0),i=0,c=0))}i>0&&(this.dMultiply(Math.pow(e,i)),this.dAddOffset(c,0)),o&&s.ZERO.subTo(this,this)}function ct(t,e,n){if("number"==typeof e)if(t<2)this.fromInt(1);else{this.fromNumber(t,n),this.testBit(t-1)||this.bitwiseTo(s.ONE.shiftLeft(t-1),gt,this),this.isEven()&&this.dAddOffset(1,0);while(!this.isProbablePrime(e))this.dAddOffset(2,0),this.bitLength()>t&&this.subTo(s.ONE.shiftLeft(t-1),this)}else{var r=new Array,o=7&t;r.length=1+(t>>3),e.nextBytes(r),o>0?r[0]&=(1<<o)-1:r[0]=0,this.fromString(r,256)}}function at(){var t=this.t,e=new Array;e[0]=this.s;var n,r=this.DB-t*this.DB%8,s=0;if(t-- >0){r<this.DB&&(n=this[t]>>r)!=(this.s&this.DM)>>r&&(e[s++]=n|this.s<<this.DB-r);while(t>=0)r<8?(n=(this[t]&(1<<r)-1)<<8-r,n|=this[--t]>>(r+=this.DB-8)):(n=this[t]>>(r-=8)&255,r<=0&&(r+=this.DB,--t)),0!=(128&n)&&(n|=-256),0==s&&(128&this.s)!=(128&n)&&++s,(s>0||n!=this.s)&&(e[s++]=n)}return e}function ut(t){return 0==this.compareTo(t)}function dt(t){return this.compareTo(t)<0?this:t}function ht(t){return this.compareTo(t)>0?this:t}function lt(t,e,n){var r,s,o=Math.min(t.t,this.t);for(r=0;r<o;++r)n[r]=e(this[r],t[r]);if(t.t<this.t){for(s=t.s&this.DM,r=o;r<this.t;++r)n[r]=e(this[r],s);n.t=this.t}else{for(s=this.s&this.DM,r=o;r<t.t;++r)n[r]=e(s,t[r]);n.t=t.t}n.s=e(this.s,t.s),n.clamp()}function pt(t,e){return t&e}function ft(t){var e=o();return this.bitwiseTo(t,pt,e),e}function gt(t,e){return t|e}function yt(t){var e=o();return this.bitwiseTo(t,gt,e),e}function mt(t,e){return t^e}function bt(t){var e=o();return this.bitwiseTo(t,mt,e),e}function wt(t,e){return t&~e}function vt(t){var e=o();return this.bitwiseTo(t,wt,e),e}function Et(){for(var t=o(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function It(t){var e=o();return t<0?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function Tt(t){var e=o();return t<0?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function At(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function St(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+At(this[t]);return this.s<0?this.t*this.DB:-1}function Bt(t){var e=0;while(0!=t)t&=t-1,++e;return e}function _t(){for(var t=0,e=this.s&this.DM,n=0;n<this.t;++n)t+=Bt(this[n]^e);return t}function Dt(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function Lt(t,e){var n=s.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function Rt(t){return this.changeBit(t,gt)}function Ut(t){return this.changeBit(t,wt)}function Ot(t){return this.changeBit(t,mt)}function kt(t,e){var n=0,r=0,s=Math.min(t.t,this.t);while(n<s)r+=this[n]+t[n],e[n++]=r&this.DM,r>>=this.DB;if(t.t<this.t){r+=t.s;while(n<this.t)r+=this[n],e[n++]=r&this.DM,r>>=this.DB;r+=this.s}else{r+=this.s;while(n<t.t)r+=t[n],e[n++]=r&this.DM,r>>=this.DB;r+=t.s}e.s=r<0?-1:0,r>0?e[n++]=r:r<-1&&(e[n++]=this.DV+r),e.t=n,e.clamp()}function Mt(t){var e=o();return this.addTo(t,e),e}function Nt(t){var e=o();return this.subTo(t,e),e}function Pt(t){var e=o();return this.multiplyTo(t,e),e}function Ct(){var t=o();return this.squareTo(t),t}function xt(t){var e=o();return this.divRemTo(t,e,null),e}function $t(t){var e=o();return this.divRemTo(t,null,e),e}function qt(t){var e=o(),n=o();return this.divRemTo(t,e,n),new Array(e,n)}function Ft(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function jt(t,e){if(0!=t){while(this.t<=e)this[this.t++]=0;this[e]+=t;while(this[e]>=this.DV)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Vt(){}function Ht(t){return t}function Xt(t,e,n){t.multiplyTo(e,n)}function zt(t,e){t.squareTo(e)}function Gt(t){return this.exp(t,new Vt)}function Yt(t,e,n){var r,s=Math.min(this.t+t.t,e);n.s=0,n.t=s;while(s>0)n[--s]=0;for(r=n.t-this.t;s<r;++s)n[s+this.t]=this.am(0,t[s],n,s,0,this.t);for(r=Math.min(t.t,e);s<r;++s)this.am(0,t[s],n,s,0,e-s);n.clamp()}function Kt(t,e,n){--e;var r=n.t=this.t+t.t-e;n.s=0;while(--r>=0)n[r]=0;for(r=Math.max(e-this.t,0);r<t.t;++r)n[this.t+r-e]=this.am(e-r,t[r],n,0,0,this.t+r-e);n.clamp(),n.drShiftTo(1,n)}function Zt(t){this.r2=o(),this.q3=o(),s.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function Qt(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=o();return t.copyTo(e),this.reduce(e),e}function Wt(t){return t}function Jt(t){t.drShiftTo(this.m.t-1,this.r2),t.t>this.m.t+1&&(t.t=this.m.t+1,t.clamp()),this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3),this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(t.compareTo(this.r2)<0)t.dAddOffset(1,this.m.t+1);t.subTo(this.r2,t);while(t.compareTo(this.m)>=0)t.subTo(this.m,t)}function te(t,e){t.squareTo(e),this.reduce(e)}function ee(t,e,n){t.multiplyTo(e,n),this.reduce(n)}function ne(t,e){var n,r,s=t.bitLength(),i=w(1);if(s<=0)return i;n=s<18?1:s<48?3:s<144?4:s<768?5:6,r=s<8?new C(e):e.isEven()?new Zt(e):new H(e);var c=new Array,a=3,u=n-1,d=(1<<n)-1;if(c[1]=r.convert(this),n>1){var h=o();r.sqrTo(c[1],h);while(a<=d)c[a]=o(),r.mulTo(h,c[a-2],c[a]),a+=2}var l,p,f=t.t-1,g=!0,y=o();s=B(t[f])-1;while(f>=0){s>=u?l=t[f]>>s-u&d:(l=(t[f]&(1<<s+1)-1)<<u-s,f>0&&(l|=t[f-1]>>this.DB+s-u)),a=n;while(0==(1&l))l>>=1,--a;if((s-=a)<0&&(s+=this.DB,--f),g)c[l].copyTo(i),g=!1;else{while(a>1)r.sqrTo(i,y),r.sqrTo(y,i),a-=2;a>0?r.sqrTo(i,y):(p=i,i=y,y=p),r.mulTo(y,c[l],i)}while(f>=0&&0==(t[f]&1<<s))r.sqrTo(i,y),p=i,i=y,y=p,--s<0&&(s=this.DB-1,--f)}return r.revert(i)}function re(t){var e=this.s<0?this.negate():this.clone(),n=t.s<0?t.negate():t.clone();if(e.compareTo(n)<0){var r=e;e=n,n=r}var s=e.getLowestSetBit(),o=n.getLowestSetBit();if(o<0)return e;s<o&&(o=s),o>0&&(e.rShiftTo(o,e),n.rShiftTo(o,n));while(e.signum()>0)(s=e.getLowestSetBit())>0&&e.rShiftTo(s,e),(s=n.getLowestSetBit())>0&&n.rShiftTo(s,n),e.compareTo(n)>=0?(e.subTo(n,e),e.rShiftTo(1,e)):(n.subTo(e,n),n.rShiftTo(1,n));return o>0&&n.lShiftTo(o,n),n}function se(t){if(t<=0)return 0;var e=this.DV%t,n=this.s<0?t-1:0;if(this.t>0)if(0==e)n=this[0]%t;else for(var r=this.t-1;r>=0;--r)n=(e*n+this[r])%t;return n}function oe(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return s.ZERO;var n=t.clone(),r=this.clone(),o=w(1),i=w(0),c=w(0),a=w(1);while(0!=n.signum()){while(n.isEven())n.rShiftTo(1,n),e?(o.isEven()&&i.isEven()||(o.addTo(this,o),i.subTo(t,i)),o.rShiftTo(1,o)):i.isEven()||i.subTo(t,i),i.rShiftTo(1,i);while(r.isEven())r.rShiftTo(1,r),e?(c.isEven()&&a.isEven()||(c.addTo(this,c),a.subTo(t,a)),c.rShiftTo(1,c)):a.isEven()||a.subTo(t,a),a.rShiftTo(1,a);n.compareTo(r)>=0?(n.subTo(r,n),e&&o.subTo(c,o),i.subTo(a,i)):(r.subTo(n,r),e&&c.subTo(o,c),a.subTo(i,a))}return 0!=r.compareTo(s.ONE)?s.ZERO:a.compareTo(t)>=0?a.subtract(t):a.signum()<0?(a.addTo(t,a),a.signum()<0?a.add(t):a):a}C.prototype.convert=x,C.prototype.revert=$,C.prototype.reduce=q,C.prototype.mulTo=F,C.prototype.sqrTo=j,H.prototype.convert=X,H.prototype.revert=z,H.prototype.reduce=G,H.prototype.mulTo=K,H.prototype.sqrTo=Y,s.prototype.copyTo=m,s.prototype.fromInt=b,s.prototype.fromString=v,s.prototype.clamp=E,s.prototype.dlShiftTo=D,s.prototype.drShiftTo=L,s.prototype.lShiftTo=R,s.prototype.rShiftTo=U,s.prototype.subTo=O,s.prototype.multiplyTo=k,s.prototype.squareTo=M,s.prototype.divRemTo=N,s.prototype.invDigit=V,s.prototype.isEven=Z,s.prototype.exp=Q,s.prototype.toString=I,s.prototype.negate=T,s.prototype.abs=A,s.prototype.compareTo=S,s.prototype.bitLength=_,s.prototype.mod=P,s.prototype.modPowInt=W,s.ZERO=w(0),s.ONE=w(1),Vt.prototype.convert=Ht,Vt.prototype.revert=Ht,Vt.prototype.mulTo=Xt,Vt.prototype.sqrTo=zt,Zt.prototype.convert=Qt,Zt.prototype.revert=Wt,Zt.prototype.reduce=Jt,Zt.prototype.mulTo=ee,Zt.prototype.sqrTo=te;var ie,ce,ae,ue=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997],de=(1<<26)/ue[ue.length-1];function he(t){var e,n=this.abs();if(1==n.t&&n[0]<=ue[ue.length-1]){for(e=0;e<ue.length;++e)if(n[0]==ue[e])return!0;return!1}if(n.isEven())return!1;e=1;while(e<ue.length){var r=ue[e],s=e+1;while(s<ue.length&&r<de)r*=ue[s++];r=n.modInt(r);while(e<s)if(r%ue[e++]==0)return!1}return n.millerRabin(t)}function le(t){var e=this.subtract(s.ONE),n=e.getLowestSetBit();if(n<=0)return!1;var r=e.shiftRight(n);t=t+1>>1,t>ue.length&&(t=ue.length);for(var i=o(),c=0;c<t;++c){i.fromInt(ue[Math.floor(Math.random()*ue.length)]);var a=i.modPow(r,this);if(0!=a.compareTo(s.ONE)&&0!=a.compareTo(e)){var u=1;while(u++<n&&0!=a.compareTo(e))if(a=a.modPowInt(2,this),0==a.compareTo(s.ONE))return!1;if(0!=a.compareTo(e))return!1}}return!0}function pe(t){ce[ae++]^=255&t,ce[ae++]^=t>>8&255,ce[ae++]^=t>>16&255,ce[ae++]^=t>>24&255,ae>=Se&&(ae-=Se)}function fe(){pe((new Date).getTime())}if(s.prototype.chunkSize=rt,s.prototype.toRadix=ot,s.prototype.fromRadix=it,s.prototype.fromNumber=ct,s.prototype.bitwiseTo=lt,s.prototype.changeBit=Lt,s.prototype.addTo=kt,s.prototype.dMultiply=Ft,s.prototype.dAddOffset=jt,s.prototype.multiplyLowerTo=Yt,s.prototype.multiplyUpperTo=Kt,s.prototype.modInt=se,s.prototype.millerRabin=le,s.prototype.clone=J,s.prototype.intValue=tt,s.prototype.byteValue=et,s.prototype.shortValue=nt,s.prototype.signum=st,s.prototype.toByteArray=at,s.prototype.equals=ut,s.prototype.min=dt,s.prototype.max=ht,s.prototype.and=ft,s.prototype.or=yt,s.prototype.xor=bt,s.prototype.andNot=vt,s.prototype.not=Et,s.prototype.shiftLeft=It,s.prototype.shiftRight=Tt,s.prototype.getLowestSetBit=St,s.prototype.bitCount=_t,s.prototype.testBit=Dt,s.prototype.setBit=Rt,s.prototype.clearBit=Ut,s.prototype.flipBit=Ot,s.prototype.add=Mt,s.prototype.subtract=Nt,s.prototype.multiply=Pt,s.prototype.divide=xt,s.prototype.remainder=$t,s.prototype.divideAndRemainder=qt,s.prototype.modPow=ne,s.prototype.modInverse=oe,s.prototype.pow=Gt,s.prototype.gcd=re,s.prototype.isProbablePrime=he,s.prototype.square=Ct,s.prototype.Barrett=Zt,null==ce){var ge;if(ce=new Array,ae=0,"undefined"!==typeof window&&window.crypto)if(window.crypto.getRandomValues){var ye=new Uint8Array(32);for(window.crypto.getRandomValues(ye),ge=0;ge<32;++ge)ce[ae++]=ye[ge]}else if("Netscape"==navigator.appName&&navigator.appVersion<"5"){var me=window.crypto.random(32);for(ge=0;ge<me.length;++ge)ce[ae++]=255&me.charCodeAt(ge)}while(ae<Se)ge=Math.floor(65536*Math.random()),ce[ae++]=ge>>>8,ce[ae++]=255&ge;ae=0,fe()}function be(){if(null==ie){for(fe(),ie=Ae(),ie.init(ce),ae=0;ae<ce.length;++ae)ce[ae]=0;ae=0}return ie.next()}function we(t){var e;for(e=0;e<t.length;++e)t[e]=be()}function ve(){}function Ee(){this.i=0,this.j=0,this.S=new Array}function Ie(t){var e,n,r;for(e=0;e<256;++e)this.S[e]=e;for(n=0,e=0;e<256;++e)n=n+this.S[e]+t[e%t.length]&255,r=this.S[e],this.S[e]=this.S[n],this.S[n]=r;this.i=0,this.j=0}function Te(){var t;return this.i=this.i+1&255,this.j=this.j+this.S[this.i]&255,t=this.S[this.i],this.S[this.i]=this.S[this.j],this.S[this.j]=t,this.S[t+this.S[this.i]&255]}function Ae(){return new Ee}ve.prototype.nextBytes=we,Ee.prototype.init=Ie,Ee.prototype.next=Te;var Se=256;t.exports={default:s,BigInteger:s,SecureRandom:ve}}).call(this)},37845:function(t,e){"use strict";e.toString=function(t){switch(t){case 1:return"IN";case 2:return"CS";case 3:return"CH";case 4:return"HS";case 255:return"ANY"}return"UNKNOWN_"+t},e.toClass=function(t){switch(t.toUpperCase()){case"IN":return 1;case"CS":return 2;case"CH":return 3;case"HS":return 4;case"ANY":return 255}return 0}},64568:function(t,e,n){"use strict";const r=n(48764).Buffer,s=n(9082),o=n(46017),i=n(76942),c=n(37845),a=n(96285),u=n(69526),d=0,h=32768,l=32768,p=~l,f=32768,g=~f,y=e.name={};y.encode=function(t,e,n){e||(e=r.alloc(y.encodingLength(t))),n||(n=0);const s=n,o=t.replace(/^\.|\.$/gm,"");if(o.length){const t=o.split(".");for(let r=0;r<t.length;r++){const s=e.write(t[r],n+1);e[n]=s,n+=s+1}}return e[n++]=0,y.encode.bytes=n-s,e},y.encode.bytes=0,y.decode=function(t,e){e||(e=0);const n=[];let r=e,s=0,o=0,i=!1;while(1){if(e>=t.length)throw new Error("Cannot decode name (buffer overflow)");const c=t[e++];if(o+=i?0:1,0===c)break;if(0===(192&c)){if(e+c>t.length)throw new Error("Cannot decode name (buffer overflow)");if(s+=c+1,s>254)throw new Error("Cannot decode name (name too long)");n.push(t.toString("utf-8",e,e+c)),e+=c,o+=i?0:c}else{if(192!==(192&c))throw new Error("Cannot decode name (bad label)");{if(e+1>t.length)throw new Error("Cannot decode name (buffer overflow)");const n=t.readUInt16BE(e-1)-49152;if(n>=r)throw new Error("Cannot decode name (bad pointer)");e=n,r=n,o+=i?0:1,i=!0}}}return y.decode.bytes=o,0===n.length?".":n.join(".")},y.decode.bytes=0,y.encodingLength=function(t){return"."===t||".."===t?1:r.byteLength(t.replace(/^\.|\.$/gm,""))+2};const m={encode:function(t,e,n){e||(e=r.alloc(m.encodingLength(t))),n||(n=0);const s=e.write(t,n+1);return e[n]=s,m.encode.bytes=s+1,e}};m.encode.bytes=0,m.decode=function(t,e){e||(e=0);const n=t[e],r=t.toString("utf-8",e+1,e+1+n);return m.decode.bytes=n+1,r},m.decode.bytes=0,m.encodingLength=function(t){return r.byteLength(t)+1};const b={encode:function(t,e,n){e||(e=b.encodingLength(t)),n||(n=0);const r=32767&(t.flags||0),s="response"===t.type?h:d;return e.writeUInt16BE(t.id||0,n),e.writeUInt16BE(r|s,n+2),e.writeUInt16BE(t.questions.length,n+4),e.writeUInt16BE(t.answers.length,n+6),e.writeUInt16BE(t.authorities.length,n+8),e.writeUInt16BE(t.additionals.length,n+10),e}};b.encode.bytes=12,b.decode=function(t,e){if(e||(e=0),t.length<12)throw new Error("Header must be 12 bytes");const n=t.readUInt16BE(e+2);return{id:t.readUInt16BE(e),type:n&h?"response":"query",flags:32767&n,flag_qr:1===(n>>15&1),opcode:i.toString(n>>11&15),flag_aa:1===(n>>10&1),flag_tc:1===(n>>9&1),flag_rd:1===(n>>8&1),flag_ra:1===(n>>7&1),flag_z:1===(n>>6&1),flag_ad:1===(n>>5&1),flag_cd:1===(n>>4&1),rcode:o.toString(15&n),questions:new Array(t.readUInt16BE(e+4)),answers:new Array(t.readUInt16BE(e+6)),authorities:new Array(t.readUInt16BE(e+8)),additionals:new Array(t.readUInt16BE(e+10))}},b.decode.bytes=12,b.encodingLength=function(){return 12};const w=e.unknown={};w.encode=function(t,e,n){return e||(e=r.alloc(w.encodingLength(t))),n||(n=0),e.writeUInt16BE(t.length,n),t.copy(e,n+2),w.encode.bytes=t.length+2,e},w.encode.bytes=0,w.decode=function(t,e){e||(e=0);const n=t.readUInt16BE(e),r=t.slice(e+2,e+2+n);return w.decode.bytes=n+2,r},w.decode.bytes=0,w.encodingLength=function(t){return t.length+2};const v=e.ns={};v.encode=function(t,e,n){return e||(e=r.alloc(v.encodingLength(t))),n||(n=0),y.encode(t,e,n+2),e.writeUInt16BE(y.encode.bytes,n),v.encode.bytes=y.encode.bytes+2,e},v.encode.bytes=0,v.decode=function(t,e){e||(e=0);const n=t.readUInt16BE(e),r=y.decode(t,e+2);return v.decode.bytes=n+2,r},v.decode.bytes=0,v.encodingLength=function(t){return y.encodingLength(t)+2};const E=e.soa={};E.encode=function(t,e,n){e||(e=r.alloc(E.encodingLength(t))),n||(n=0);const s=n;return n+=2,y.encode(t.mname,e,n),n+=y.encode.bytes,y.encode(t.rname,e,n),n+=y.encode.bytes,e.writeUInt32BE(t.serial||0,n),n+=4,e.writeUInt32BE(t.refresh||0,n),n+=4,e.writeUInt32BE(t.retry||0,n),n+=4,e.writeUInt32BE(t.expire||0,n),n+=4,e.writeUInt32BE(t.minimum||0,n),n+=4,e.writeUInt16BE(n-s-2,s),E.encode.bytes=n-s,e},E.encode.bytes=0,E.decode=function(t,e){e||(e=0);const n=e,r={};return e+=2,r.mname=y.decode(t,e),e+=y.decode.bytes,r.rname=y.decode(t,e),e+=y.decode.bytes,r.serial=t.readUInt32BE(e),e+=4,r.refresh=t.readUInt32BE(e),e+=4,r.retry=t.readUInt32BE(e),e+=4,r.expire=t.readUInt32BE(e),e+=4,r.minimum=t.readUInt32BE(e),e+=4,E.decode.bytes=e-n,r},E.decode.bytes=0,E.encodingLength=function(t){return 22+y.encodingLength(t.mname)+y.encodingLength(t.rname)};const I=e.txt={};I.encode=function(t,e,n){Array.isArray(t)||(t=[t]);for(let o=0;o<t.length;o++)if("string"===typeof t[o]&&(t[o]=r.from(t[o])),!r.isBuffer(t[o]))throw new Error("Must be a Buffer");e||(e=r.alloc(I.encodingLength(t))),n||(n=0);const s=n;return n+=2,t.forEach((function(t){e[n++]=t.length,t.copy(e,n,0,t.length),n+=t.length})),e.writeUInt16BE(n-s-2,s),I.encode.bytes=n-s,e},I.encode.bytes=0,I.decode=function(t,e){e||(e=0);const n=e;let r=t.readUInt16BE(e);e+=2;let s=[];while(r>0){const n=t[e++];if(--r,r<n)throw new Error("Buffer overflow");s.push(t.slice(e,e+n)),e+=n,r-=n}return I.decode.bytes=e-n,s},I.decode.bytes=0,I.encodingLength=function(t){Array.isArray(t)||(t=[t]);let e=2;return t.forEach((function(t){e+="string"===typeof t?r.byteLength(t)+1:t.length+1})),e};const T=e["null"]={};T.encode=function(t,e,n){e||(e=r.alloc(T.encodingLength(t))),n||(n=0),"string"===typeof t&&(t=r.from(t)),t||(t=r.alloc(0));const s=n;n+=2;const o=t.length;return t.copy(e,n,0,o),n+=o,e.writeUInt16BE(n-s-2,s),T.encode.bytes=n-s,e},T.encode.bytes=0,T.decode=function(t,e){e||(e=0);const n=e,r=t.readUInt16BE(e);e+=2;const s=t.slice(e,e+r);return e+=r,T.decode.bytes=e-n,s},T.decode.bytes=0,T.encodingLength=function(t){return t?(r.isBuffer(t)?t.length:r.byteLength(t))+2:2};const A=e.hinfo={};A.encode=function(t,e,n){e||(e=r.alloc(A.encodingLength(t))),n||(n=0);const s=n;return n+=2,m.encode(t.cpu,e,n),n+=m.encode.bytes,m.encode(t.os,e,n),n+=m.encode.bytes,e.writeUInt16BE(n-s-2,s),A.encode.bytes=n-s,e},A.encode.bytes=0,A.decode=function(t,e){e||(e=0);const n=e,r={};return e+=2,r.cpu=m.decode(t,e),e+=m.decode.bytes,r.os=m.decode(t,e),e+=m.decode.bytes,A.decode.bytes=e-n,r},A.decode.bytes=0,A.encodingLength=function(t){return m.encodingLength(t.cpu)+m.encodingLength(t.os)+2};const S=e.ptr={},B=e.cname=S,_=e.dname=S;S.encode=function(t,e,n){return e||(e=r.alloc(S.encodingLength(t))),n||(n=0),y.encode(t,e,n+2),e.writeUInt16BE(y.encode.bytes,n),S.encode.bytes=y.encode.bytes+2,e},S.encode.bytes=0,S.decode=function(t,e){e||(e=0);const n=y.decode(t,e+2);return S.decode.bytes=y.decode.bytes+2,n},S.decode.bytes=0,S.encodingLength=function(t){return y.encodingLength(t)+2};const D=e.srv={};D.encode=function(t,e,n){e||(e=r.alloc(D.encodingLength(t))),n||(n=0),e.writeUInt16BE(t.priority||0,n+2),e.writeUInt16BE(t.weight||0,n+4),e.writeUInt16BE(t.port||0,n+6),y.encode(t.target,e,n+8);const s=y.encode.bytes+6;return e.writeUInt16BE(s,n),D.encode.bytes=s+2,e},D.encode.bytes=0,D.decode=function(t,e){e||(e=0);const n=t.readUInt16BE(e),r={};return r.priority=t.readUInt16BE(e+2),r.weight=t.readUInt16BE(e+4),r.port=t.readUInt16BE(e+6),r.target=y.decode(t,e+8),D.decode.bytes=n+2,r},D.decode.bytes=0,D.encodingLength=function(t){return 8+y.encodingLength(t.target)};const L=e.caa={};L.ISSUER_CRITICAL=128,L.encode=function(t,e,n){const s=L.encodingLength(t);return e||(e=r.alloc(L.encodingLength(t))),n||(n=0),t.issuerCritical&&(t.flags=L.ISSUER_CRITICAL),e.writeUInt16BE(s-2,n),n+=2,e.writeUInt8(t.flags||0,n),n+=1,m.encode(t.tag,e,n),n+=m.encode.bytes,e.write(t.value,n),n+=r.byteLength(t.value),L.encode.bytes=s,e},L.encode.bytes=0,L.decode=function(t,e){e||(e=0);const n=t.readUInt16BE(e);e+=2;const r=e,s={};return s.flags=t.readUInt8(e),e+=1,s.tag=m.decode(t,e),e+=m.decode.bytes,s.value=t.toString("utf-8",e,r+n),s.issuerCritical=!!(s.flags&L.ISSUER_CRITICAL),L.decode.bytes=n+2,s},L.decode.bytes=0,L.encodingLength=function(t){return m.encodingLength(t.tag)+m.encodingLength(t.value)+2};const R=e.mx={};R.encode=function(t,e,n){e||(e=r.alloc(R.encodingLength(t))),n||(n=0);const s=n;return n+=2,e.writeUInt16BE(t.preference||0,n),n+=2,y.encode(t.exchange,e,n),n+=y.encode.bytes,e.writeUInt16BE(n-s-2,s),R.encode.bytes=n-s,e},R.encode.bytes=0,R.decode=function(t,e){e||(e=0);const n=e,r={};return e+=2,r.preference=t.readUInt16BE(e),e+=2,r.exchange=y.decode(t,e),e+=y.decode.bytes,R.decode.bytes=e-n,r},R.encodingLength=function(t){return 4+y.encodingLength(t.exchange)};const U=e.a={};U.encode=function(t,e,n){return e||(e=r.alloc(U.encodingLength(t))),n||(n=0),e.writeUInt16BE(4,n),n+=2,u.v4.encode(t,e,n),U.encode.bytes=6,e},U.encode.bytes=0,U.decode=function(t,e){e||(e=0),e+=2;const n=u.v4.decode(t,e);return U.decode.bytes=6,n},U.decode.bytes=0,U.encodingLength=function(){return 6};const O=e.aaaa={};O.encode=function(t,e,n){return e||(e=r.alloc(O.encodingLength(t))),n||(n=0),e.writeUInt16BE(16,n),n+=2,u.v6.encode(t,e,n),O.encode.bytes=18,e},O.encode.bytes=0,O.decode=function(t,e){e||(e=0),e+=2;const n=u.v6.decode(t,e);return O.decode.bytes=18,n},O.decode.bytes=0,O.encodingLength=function(){return 18};const k=e.option={};k.encode=function(t,e,n){e||(e=r.alloc(k.encodingLength(t))),n||(n=0);const s=n,o=a.toCode(t.code);if(e.writeUInt16BE(o,n),n+=2,t.data)e.writeUInt16BE(t.data.length,n),n+=2,t.data.copy(e,n),n+=t.data.length;else switch(o){case 8:const s=t.sourcePrefixLength||0,o=t.family||u.familyOf(t.ip),i=u.encode(t.ip,r.alloc),c=Math.ceil(s/8);e.writeUInt16BE(c+4,n),n+=2,e.writeUInt16BE(o,n),n+=2,e.writeUInt8(s,n++),e.writeUInt8(t.scopePrefixLength||0,n++),i.copy(e,n,0,c),n+=c;break;case 11:t.timeout?(e.writeUInt16BE(2,n),n+=2,e.writeUInt16BE(t.timeout,n),n+=2):(e.writeUInt16BE(0,n),n+=2);break;case 12:const a=t.length||0;e.writeUInt16BE(a,n),n+=2,e.fill(0,n,n+a),n+=a;break;case 14:const d=2*t.tags.length;e.writeUInt16BE(d,n),n+=2;for(const r of t.tags)e.writeUInt16BE(r,n),n+=2;break;default:throw new Error(`Unknown roption code: ${t.code}`)}return k.encode.bytes=n-s,e},k.encode.bytes=0,k.decode=function(t,e){e||(e=0);const n={};n.code=t.readUInt16BE(e),n.type=a.toString(n.code),e+=2;const s=t.readUInt16BE(e);switch(e+=2,n.data=t.slice(e,e+s),n.code){case 8:n.family=t.readUInt16BE(e),e+=2,n.sourcePrefixLength=t.readUInt8(e++),n.scopePrefixLength=t.readUInt8(e++);const o=r.alloc(1===n.family?4:16);t.copy(o,0,e,e+s-4),n.ip=u.decode(o);break;case 11:s>0&&(n.timeout=t.readUInt16BE(e),e+=2);break;case 14:n.tags=[];for(let r=0;r<s;r+=2)n.tags.push(t.readUInt16BE(e)),e+=2}return k.decode.bytes=s+4,n},k.decode.bytes=0,k.encodingLength=function(t){if(t.data)return t.data.length+4;const e=a.toCode(t.code);switch(e){case 8:const e=t.sourcePrefixLength||0;return Math.ceil(e/8)+8;case 11:return"number"===typeof t.timeout?6:4;case 12:return t.length+4;case 14:return 4+2*t.tags.length}throw new Error(`Unknown roption code: ${t.code}`)};const M=e.opt={};M.encode=function(t,e,n){e||(e=r.alloc(M.encodingLength(t))),n||(n=0);const s=n,o=z(t,k);return e.writeUInt16BE(o,n),n=G(t,k,e,n+2),M.encode.bytes=n-s,e},M.encode.bytes=0,M.decode=function(t,e){e||(e=0);const n=e,r=[];let s=t.readUInt16BE(e);e+=2;let o=0;while(s>0)r[o++]=k.decode(t,e),e+=k.decode.bytes,s-=k.decode.bytes;return M.decode.bytes=e-n,r},M.decode.bytes=0,M.encodingLength=function(t){return 2+z(t||[],k)};const N=e.dnskey={};N.PROTOCOL_DNSSEC=3,N.ZONE_KEY=128,N.SECURE_ENTRYPOINT=32768,N.encode=function(t,e,n){e||(e=r.alloc(N.encodingLength(t))),n||(n=0);const s=n,o=t.key;if(!r.isBuffer(o))throw new Error("Key must be a Buffer");return n+=2,e.writeUInt16BE(t.flags,n),n+=2,e.writeUInt8(N.PROTOCOL_DNSSEC,n),n+=1,e.writeUInt8(t.algorithm,n),n+=1,o.copy(e,n,0,o.length),n+=o.length,N.encode.bytes=n-s,e.writeUInt16BE(N.encode.bytes-2,s),e},N.encode.bytes=0,N.decode=function(t,e){e||(e=0);const n=e;var r={},s=t.readUInt16BE(e);if(e+=2,r.flags=t.readUInt16BE(e),e+=2,t.readUInt8(e)!==N.PROTOCOL_DNSSEC)throw new Error("Protocol must be 3");return e+=1,r.algorithm=t.readUInt8(e),e+=1,r.key=t.slice(e,n+s+2),e+=r.key.length,N.decode.bytes=e-n,r},N.decode.bytes=0,N.encodingLength=function(t){return 6+r.byteLength(t.key)};const P=e.rrsig={};P.encode=function(t,e,n){e||(e=r.alloc(P.encodingLength(t))),n||(n=0);const o=n,i=t.signature;if(!r.isBuffer(i))throw new Error("Signature must be a Buffer");return n+=2,e.writeUInt16BE(s.toType(t.typeCovered),n),n+=2,e.writeUInt8(t.algorithm,n),n+=1,e.writeUInt8(t.labels,n),n+=1,e.writeUInt32BE(t.originalTTL,n),n+=4,e.writeUInt32BE(t.expiration,n),n+=4,e.writeUInt32BE(t.inception,n),n+=4,e.writeUInt16BE(t.keyTag,n),n+=2,y.encode(t.signersName,e,n),n+=y.encode.bytes,i.copy(e,n,0,i.length),n+=i.length,P.encode.bytes=n-o,e.writeUInt16BE(P.encode.bytes-2,o),e},P.encode.bytes=0,P.decode=function(t,e){e||(e=0);const n=e;var r={},o=t.readUInt16BE(e);return e+=2,r.typeCovered=s.toString(t.readUInt16BE(e)),e+=2,r.algorithm=t.readUInt8(e),e+=1,r.labels=t.readUInt8(e),e+=1,r.originalTTL=t.readUInt32BE(e),e+=4,r.expiration=t.readUInt32BE(e),e+=4,r.inception=t.readUInt32BE(e),e+=4,r.keyTag=t.readUInt16BE(e),e+=2,r.signersName=y.decode(t,e),e+=y.decode.bytes,r.signature=t.slice(e,n+o+2),e+=r.signature.length,P.decode.bytes=e-n,r},P.decode.bytes=0,P.encodingLength=function(t){return 20+y.encodingLength(t.signersName)+r.byteLength(t.signature)};const C=e.rp={};C.encode=function(t,e,n){e||(e=r.alloc(C.encodingLength(t))),n||(n=0);const s=n;return n+=2,y.encode(t.mbox||".",e,n),n+=y.encode.bytes,y.encode(t.txt||".",e,n),n+=y.encode.bytes,C.encode.bytes=n-s,e.writeUInt16BE(C.encode.bytes-2,s),e},C.encode.bytes=0,C.decode=function(t,e){e||(e=0);const n=e,r={};return e+=2,r.mbox=y.decode(t,e)||".",e+=y.decode.bytes,r.txt=y.decode(t,e)||".",e+=y.decode.bytes,C.decode.bytes=e-n,r},C.decode.bytes=0,C.encodingLength=function(t){return 2+y.encodingLength(t.mbox||".")+y.encodingLength(t.txt||".")};const x={encode:function(t,e,n){e||(e=r.alloc(x.encodingLength(t))),n||(n=0);const o=n;for(var i=[],c=0;c<t.length;c++){var a=s.toType(t[c]);void 0===i[a>>8]&&(i[a>>8]=[]),i[a>>8][a>>3&31]|=1<<7-(7&a)}for(c=0;c<i.length;c++)if(void 0!==i[c]){var u=r.from(i[c]);e.writeUInt8(c,n),n+=1,e.writeUInt8(u.length,n),n+=1,u.copy(e,n),n+=u.length}return x.encode.bytes=n-o,e}};x.encode.bytes=0,x.decode=function(t,e,n){e||(e=0);const r=e;var o=[];while(e-r<n){var i=t.readUInt8(e);e+=1;var c=t.readUInt8(e);e+=1;for(var a=0;a<c;a++)for(var u=t.readUInt8(e+a),d=0;d<8;d++)if(u&1<<7-d){var h=s.toString(i<<8|a<<3|d);o.push(h)}e+=c}return x.decode.bytes=e-r,o},x.decode.bytes=0,x.encodingLength=function(t){for(var e=[],n=0;n<t.length;n++){var r=s.toType(t[n]);e[r>>8]=Math.max(e[r>>8]||0,255&r)}var o=0;for(n=0;n<e.length;n++)void 0!==e[n]&&(o+=2+Math.ceil((e[n]+1)/8));return o};const $=e.nsec={};$.encode=function(t,e,n){e||(e=r.alloc($.encodingLength(t))),n||(n=0);const s=n;return n+=2,y.encode(t.nextDomain,e,n),n+=y.encode.bytes,x.encode(t.rrtypes,e,n),n+=x.encode.bytes,$.encode.bytes=n-s,e.writeUInt16BE($.encode.bytes-2,s),e},$.encode.bytes=0,$.decode=function(t,e){e||(e=0);const n=e;var r={},s=t.readUInt16BE(e);return e+=2,r.nextDomain=y.decode(t,e),e+=y.decode.bytes,r.rrtypes=x.decode(t,e,s-(e-n)),e+=x.decode.bytes,$.decode.bytes=e-n,r},$.decode.bytes=0,$.encodingLength=function(t){return 2+y.encodingLength(t.nextDomain)+x.encodingLength(t.rrtypes)};const q=e.nsec3={};q.encode=function(t,e,n){e||(e=r.alloc(q.encodingLength(t))),n||(n=0);const s=n,o=t.salt;if(!r.isBuffer(o))throw new Error("salt must be a Buffer");const i=t.nextDomain;if(!r.isBuffer(i))throw new Error("nextDomain must be a Buffer");return n+=2,e.writeUInt8(t.algorithm,n),n+=1,e.writeUInt8(t.flags,n),n+=1,e.writeUInt16BE(t.iterations,n),n+=2,e.writeUInt8(o.length,n),n+=1,o.copy(e,n,0,o.length),n+=o.length,e.writeUInt8(i.length,n),n+=1,i.copy(e,n,0,i.length),n+=i.length,x.encode(t.rrtypes,e,n),n+=x.encode.bytes,q.encode.bytes=n-s,e.writeUInt16BE(q.encode.bytes-2,s),e},q.encode.bytes=0,q.decode=function(t,e){e||(e=0);const n=e;var r={},s=t.readUInt16BE(e);e+=2,r.algorithm=t.readUInt8(e),e+=1,r.flags=t.readUInt8(e),e+=1,r.iterations=t.readUInt16BE(e),e+=2;const o=t.readUInt8(e);e+=1,r.salt=t.slice(e,e+o),e+=o;const i=t.readUInt8(e);return e+=1,r.nextDomain=t.slice(e,e+i),e+=i,r.rrtypes=x.decode(t,e,s-(e-n)),e+=x.decode.bytes,q.decode.bytes=e-n,r},q.decode.bytes=0,q.encodingLength=function(t){return 8+t.salt.length+t.nextDomain.length+x.encodingLength(t.rrtypes)};const F=e.ds={};F.encode=function(t,e,n){e||(e=r.alloc(F.encodingLength(t))),n||(n=0);const s=n,o=t.digest;if(!r.isBuffer(o))throw new Error("Digest must be a Buffer");return n+=2,e.writeUInt16BE(t.keyTag,n),n+=2,e.writeUInt8(t.algorithm,n),n+=1,e.writeUInt8(t.digestType,n),n+=1,o.copy(e,n,0,o.length),n+=o.length,F.encode.bytes=n-s,e.writeUInt16BE(F.encode.bytes-2,s),e},F.encode.bytes=0,F.decode=function(t,e){e||(e=0);const n=e;var r={},s=t.readUInt16BE(e);return e+=2,r.keyTag=t.readUInt16BE(e),e+=2,r.algorithm=t.readUInt8(e),e+=1,r.digestType=t.readUInt8(e),e+=1,r.digest=t.slice(e,n+s+2),e+=r.digest.length,F.decode.bytes=e-n,r},F.decode.bytes=0,F.encodingLength=function(t){return 6+r.byteLength(t.digest)};const j=e.sshfp={};j.getFingerprintLengthForHashType=function(t){switch(t){case 1:return 20;case 2:return 32}},j.encode=function(t,e,n){e||(e=r.alloc(j.encodingLength(t))),n||(n=0);const s=n;n+=2,e[n]=t.algorithm,n+=1,e[n]=t.hash,n+=1;const o=r.from(t.fingerprint.toUpperCase(),"hex");if(o.length!==j.getFingerprintLengthForHashType(t.hash))throw new Error("Invalid fingerprint length");return o.copy(e,n),n+=o.byteLength,j.encode.bytes=n-s,e.writeUInt16BE(j.encode.bytes-2,s),e},j.encode.bytes=0,j.decode=function(t,e){e||(e=0);const n=e,r={};e+=2,r.algorithm=t[e],e+=1,r.hash=t[e],e+=1;const s=j.getFingerprintLengthForHashType(r.hash);return r.fingerprint=t.slice(e,e+s).toString("hex").toUpperCase(),e+=s,j.decode.bytes=e-n,r},j.decode.bytes=0,j.encodingLength=function(t){return 4+r.from(t.fingerprint,"hex").byteLength};const V=e.record=function(t){switch(t.toUpperCase()){case"A":return U;case"PTR":return S;case"CNAME":return B;case"DNAME":return _;case"TXT":return I;case"NULL":return T;case"AAAA":return O;case"SRV":return D;case"HINFO":return A;case"CAA":return L;case"NS":return v;case"SOA":return E;case"MX":return R;case"OPT":return M;case"DNSKEY":return N;case"RRSIG":return P;case"RP":return C;case"NSEC":return $;case"NSEC3":return q;case"SSHFP":return j;case"DS":return F}return w},H=e.answer={};H.encode=function(t,e,n){e||(e=r.alloc(H.encodingLength(t))),n||(n=0);const o=n;if(y.encode(t.name,e,n),n+=y.encode.bytes,e.writeUInt16BE(s.toType(t.type),n),"OPT"===t.type.toUpperCase()){if("."!==t.name)throw new Error("OPT name must be root.");e.writeUInt16BE(t.udpPayloadSize||4096,n+2),e.writeUInt8(t.extendedRcode||0,n+4),e.writeUInt8(t.ednsVersion||0,n+5),e.writeUInt16BE(t.flags||0,n+6),n+=8,M.encode(t.options||[],e,n),n+=M.encode.bytes}else{let r=c.toClass(void 0===t.class?"IN":t.class);t.flush&&(r|=l),e.writeUInt16BE(r,n+2),e.writeUInt32BE(t.ttl||0,n+4),n+=8;const s=V(t.type);s.encode(t.data,e,n),n+=s.encode.bytes}return H.encode.bytes=n-o,e},H.encode.bytes=0,H.decode=function(t,e){e||(e=0);const n={},r=e;if(n.name=y.decode(t,e),e+=y.decode.bytes,n.type=s.toString(t.readUInt16BE(e)),"OPT"===n.type)n.udpPayloadSize=t.readUInt16BE(e+2),n.extendedRcode=t.readUInt8(e+4),n.ednsVersion=t.readUInt8(e+5),n.flags=t.readUInt16BE(e+6),n.flag_do=1===(n.flags>>15&1),n.options=M.decode(t,e+8),e+=8+M.decode.bytes;else{const r=t.readUInt16BE(e+2);n.ttl=t.readUInt32BE(e+4),n.class=c.toString(r&p),n.flush=!!(r&l);const s=V(n.type);n.data=s.decode(t,e+8),e+=8+s.decode.bytes}return H.decode.bytes=e-r,n},H.decode.bytes=0,H.encodingLength=function(t){const e=null!==t.data&&void 0!==t.data?t.data:t.options;return y.encodingLength(t.name)+8+V(t.type).encodingLength(e)};const X=e.question={};function z(t,e){let n=0;for(let r=0;r<t.length;r++)n+=e.encodingLength(t[r]);return n}function G(t,e,n,r){for(let s=0;s<t.length;s++)e.encode(t[s],n,r),r+=e.encode.bytes;return r}function Y(t,e,n,r){for(let s=0;s<t.length;s++)t[s]=e.decode(n,r),r+=e.decode.bytes;return r}X.encode=function(t,e,n){e||(e=r.alloc(X.encodingLength(t))),n||(n=0);const o=n;return y.encode(t.name,e,n),n+=y.encode.bytes,e.writeUInt16BE(s.toType(t.type),n),n+=2,e.writeUInt16BE(c.toClass(void 0===t.class?"IN":t.class),n),n+=2,X.encode.bytes=n-o,t},X.encode.bytes=0,X.decode=function(t,e){e||(e=0);const n=e,r={};r.name=y.decode(t,e),e+=y.decode.bytes,r.type=s.toString(t.readUInt16BE(e)),e+=2,r.class=c.toString(t.readUInt16BE(e)),e+=2;const o=!!(r.class&f);return o&&(r.class&=g),X.decode.bytes=e-n,r},X.decode.bytes=0,X.encodingLength=function(t){return y.encodingLength(t.name)+4},e.AUTHORITATIVE_ANSWER=1024,e.TRUNCATED_RESPONSE=512,e.RECURSION_DESIRED=256,e.RECURSION_AVAILABLE=128,e.AUTHENTIC_DATA=32,e.CHECKING_DISABLED=16,e.DNSSEC_OK=32768,e.encode=function(t,n,s){const o=!n;o&&(n=r.alloc(e.encodingLength(t))),s||(s=0);const i=s;return t.questions||(t.questions=[]),t.answers||(t.answers=[]),t.authorities||(t.authorities=[]),t.additionals||(t.additionals=[]),b.encode(t,n,s),s+=b.encode.bytes,s=G(t.questions,X,n,s),s=G(t.answers,H,n,s),s=G(t.authorities,H,n,s),s=G(t.additionals,H,n,s),e.encode.bytes=s-i,o&&e.encode.bytes!==n.length?n.slice(0,e.encode.bytes):n},e.encode.bytes=0,e.decode=function(t,n){n||(n=0);const r=n,s=b.decode(t,n);return n+=b.decode.bytes,n=Y(s.questions,X,t,n),n=Y(s.answers,H,t,n),n=Y(s.authorities,H,t,n),n=Y(s.additionals,H,t,n),e.decode.bytes=n-r,s},e.decode.bytes=0,e.encodingLength=function(t){return b.encodingLength(t)+z(t.questions||[],X)+z(t.answers||[],H)+z(t.authorities||[],H)+z(t.additionals||[],H)},e.streamEncode=function(t){const n=e.encode(t),s=r.alloc(2);s.writeUInt16BE(n.byteLength);const o=r.concat([s,n]);return e.streamEncode.bytes=o.byteLength,o},e.streamEncode.bytes=0,e.streamDecode=function(t){const n=t.readUInt16BE(0);if(t.byteLength<n+2)return null;const r=e.decode(t.slice(2));return e.streamDecode.bytes=e.decode.bytes,r},e.streamDecode.bytes=0},76942:function(t,e){"use strict";e.toString=function(t){switch(t){case 0:return"QUERY";case 1:return"IQUERY";case 2:return"STATUS";case 3:return"OPCODE_3";case 4:return"NOTIFY";case 5:return"UPDATE";case 6:return"OPCODE_6";case 7:return"OPCODE_7";case 8:return"OPCODE_8";case 9:return"OPCODE_9";case 10:return"OPCODE_10";case 11:return"OPCODE_11";case 12:return"OPCODE_12";case 13:return"OPCODE_13";case 14:return"OPCODE_14";case 15:return"OPCODE_15"}return"OPCODE_"+t},e.toOpcode=function(t){switch(t.toUpperCase()){case"QUERY":return 0;case"IQUERY":return 1;case"STATUS":return 2;case"OPCODE_3":return 3;case"NOTIFY":return 4;case"UPDATE":return 5;case"OPCODE_6":return 6;case"OPCODE_7":return 7;case"OPCODE_8":return 8;case"OPCODE_9":return 9;case"OPCODE_10":return 10;case"OPCODE_11":return 11;case"OPCODE_12":return 12;case"OPCODE_13":return 13;case"OPCODE_14":return 14;case"OPCODE_15":return 15}return 0}},96285:function(t,e){"use strict";e.toString=function(t){switch(t){case 1:return"LLQ";case 2:return"UL";case 3:return"NSID";case 5:return"DAU";case 6:return"DHU";case 7:return"N3U";case 8:return"CLIENT_SUBNET";case 9:return"EXPIRE";case 10:return"COOKIE";case 11:return"TCP_KEEPALIVE";case 12:return"PADDING";case 13:return"CHAIN";case 14:return"KEY_TAG";case 26946:return"DEVICEID"}return t<0?null:`OPTION_${t}`},e.toCode=function(t){if("number"===typeof t)return t;if(!t)return-1;switch(t.toUpperCase()){case"OPTION_0":return 0;case"LLQ":return 1;case"UL":return 2;case"NSID":return 3;case"OPTION_4":return 4;case"DAU":return 5;case"DHU":return 6;case"N3U":return 7;case"CLIENT_SUBNET":return 8;case"EXPIRE":return 9;case"COOKIE":return 10;case"TCP_KEEPALIVE":return 11;case"PADDING":return 12;case"CHAIN":return 13;case"KEY_TAG":return 14;case"DEVICEID":return 26946;case"OPTION_65535":return 65535}const e=t.match(/_(\d+)$/);return e?parseInt(e[1],10):-1}},46017:function(t,e){"use strict";e.toString=function(t){switch(t){case 0:return"NOERROR";case 1:return"FORMERR";case 2:return"SERVFAIL";case 3:return"NXDOMAIN";case 4:return"NOTIMP";case 5:return"REFUSED";case 6:return"YXDOMAIN";case 7:return"YXRRSET";case 8:return"NXRRSET";case 9:return"NOTAUTH";case 10:return"NOTZONE";case 11:return"RCODE_11";case 12:return"RCODE_12";case 13:return"RCODE_13";case 14:return"RCODE_14";case 15:return"RCODE_15"}return"RCODE_"+t},e.toRcode=function(t){switch(t.toUpperCase()){case"NOERROR":return 0;case"FORMERR":return 1;case"SERVFAIL":return 2;case"NXDOMAIN":return 3;case"NOTIMP":return 4;case"REFUSED":return 5;case"YXDOMAIN":return 6;case"YXRRSET":return 7;case"NXRRSET":return 8;case"NOTAUTH":return 9;case"NOTZONE":return 10;case"RCODE_11":return 11;case"RCODE_12":return 12;case"RCODE_13":return 13;case"RCODE_14":return 14;case"RCODE_15":return 15}return 0}},9082:function(t,e){"use strict";e.toString=function(t){switch(t){case 1:return"A";case 10:return"NULL";case 28:return"AAAA";case 18:return"AFSDB";case 42:return"APL";case 257:return"CAA";case 60:return"CDNSKEY";case 59:return"CDS";case 37:return"CERT";case 5:return"CNAME";case 49:return"DHCID";case 32769:return"DLV";case 39:return"DNAME";case 48:return"DNSKEY";case 43:return"DS";case 55:return"HIP";case 13:return"HINFO";case 45:return"IPSECKEY";case 25:return"KEY";case 36:return"KX";case 29:return"LOC";case 15:return"MX";case 35:return"NAPTR";case 2:return"NS";case 47:return"NSEC";case 50:return"NSEC3";case 51:return"NSEC3PARAM";case 12:return"PTR";case 46:return"RRSIG";case 17:return"RP";case 24:return"SIG";case 6:return"SOA";case 99:return"SPF";case 33:return"SRV";case 44:return"SSHFP";case 32768:return"TA";case 249:return"TKEY";case 52:return"TLSA";case 250:return"TSIG";case 16:return"TXT";case 252:return"AXFR";case 251:return"IXFR";case 41:return"OPT";case 255:return"ANY"}return"UNKNOWN_"+t},e.toType=function(t){switch(t.toUpperCase()){case"A":return 1;case"NULL":return 10;case"AAAA":return 28;case"AFSDB":return 18;case"APL":return 42;case"CAA":return 257;case"CDNSKEY":return 60;case"CDS":return 59;case"CERT":return 37;case"CNAME":return 5;case"DHCID":return 49;case"DLV":return 32769;case"DNAME":return 39;case"DNSKEY":return 48;case"DS":return 43;case"HIP":return 55;case"HINFO":return 13;case"IPSECKEY":return 45;case"KEY":return 25;case"KX":return 36;case"LOC":return 29;case"MX":return 15;case"NAPTR":return 35;case"NS":return 2;case"NSEC":return 47;case"NSEC3":return 50;case"NSEC3PARAM":return 51;case"PTR":return 12;case"RRSIG":return 46;case"RP":return 17;case"SIG":return 24;case"SOA":return 6;case"SPF":return 99;case"SRV":return 33;case"SSHFP":return 44;case"TA":return 32768;case"TKEY":return 249;case"TLSA":return 52;case"TSIG":return 250;case"TXT":return 16;case"AXFR":return 252;case"IXFR":return 251;case"OPT":return 41;case"ANY":return 255;case"*":return 255}return t.toUpperCase().startsWith("UNKNOWN_")?parseInt(t.slice(8)):0}},22412:function(t){t.exports=function(t){if(t){if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"===typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}},59040:function(t,e,n){var r=n(34155),s=n(64568),o=n(14863),i=n(53781),c=n(17187),a=n(67435),u=function(){};function d(){for(var t=a.networkInterfaces(),e=Object.keys(t),n=0;n<e.length;n++)for(var r=t[e[n]],s=0;s<r.length;s++){var o=r[s];if(l(o.family)&&!o.internal)return"darwin"===a.platform()&&"en0"===e[n]?o.address:"0.0.0.0"}return"127.0.0.1"}function h(){for(var t=a.networkInterfaces(),e=Object.keys(t),n=[],r=0;r<e.length;r++)for(var s=t[e[r]],o=0;o<s.length;o++){var i=s[o];if(l(i.family)){n.push(i.address);break}}return n}function l(t){return 4===t||"IPv4"===t}t.exports=function(t){t||(t={});var e=new c.EventEmitter,n="number"===typeof t.port?t.port:5353,a=t.type||"udp4",l=t.ip||t.host||("udp4"===a?"224.0.0.251":null),p={address:l,port:n},f={},g=!1,y=null;if("udp6"===a&&(!l||!t.interface))throw new Error("For IPv6 multicast you must specify `ip` and `interface`");var m=t.socket||o.createSocket({type:a,reuseAddr:!1!==t.reuseAddr,toString:function(){return a}});m.on("error",(function(t){"EACCES"===t.code||"EADDRINUSE"===t.code?e.emit("error",t):e.emit("warning",t)})),m.on("message",(function(t,n){try{t=s.decode(t)}catch(r){return void e.emit("warning",r)}e.emit("packet",t,n),"query"===t.type&&e.emit("query",t,n),"response"===t.type&&e.emit("response",t,n)})),m.on("listening",(function(){n||(n=p.port=m.address().port),!1!==t.multicast&&(e.update(),y=setInterval(e.update,5e3),m.setMulticastTTL(t.ttl||255),m.setMulticastLoopback(!1!==t.loopback))}));var b=i((function(e){if(!n||!1===t.bind)return e(null);m.once("error",e),m.bind(n,t.bind||t.interface,(function(){m.removeListener("error",e),e(null)}))}));return b((function(t){if(t)return e.emit("error",t);e.emit("ready")})),e.send=function(t,n,r){if("function"===typeof n)return e.send(t,null,n);function o(e){if(g)return r();if(e)return r(e);var o=s.encode(t);m.send(o,0,o.length,n.port,n.address||n.host,r)}r||(r=u),n?n.host||n.address||(n.address=p.address):n=p,b(o)},e.response=e.respond=function(t,n,r){Array.isArray(t)&&(t={answers:t}),t.type="response",t.flags=(t.flags||0)|s.AUTHORITATIVE_ANSWER,e.send(t,n,r)},e.query=function(t,n,r,s){return"function"===typeof n?e.query(t,null,null,n):"object"===typeof n&&n&&n.port?e.query(t,null,n,r):"function"===typeof r?e.query(t,n,null,r):(s||(s=u),"string"===typeof t&&(t=[{name:t,type:n||"ANY"}]),Array.isArray(t)&&(t={type:"query",questions:t}),t.type="query",void e.send(t,r,s))},e.destroy=function(t){if(t||(t=u),g)return r.nextTick(t);for(var e in g=!0,clearInterval(y),f)try{m.dropMembership(l,e)}catch(n){}f={},m.close(t)},e.update=function(){for(var n=t.interface?[].concat(t.interface):h(),r=!1,s=0;s<n.length;s++){var o=n[s];if(!f[o])try{m.addMembership(l,o),f[o]=!0,r=!0}catch(i){e.emit("warning",i)}}if(r){if(m.setMulticastInterface)try{m.setMulticastInterface(t.interface||d())}catch(i){e.emit("warning",i)}e.emit("networkInterface")}},e}},67435:function(t,e){e.endianness=function(){return"LE"},e.hostname=function(){return"undefined"!==typeof location?location.hostname:""},e.loadavg=function(){return[]},e.uptime=function(){return 0},e.freemem=function(){return Number.MAX_VALUE},e.totalmem=function(){return Number.MAX_VALUE},e.cpus=function(){return[]},e.type=function(){return"Browser"},e.release=function(){return"undefined"!==typeof navigator?navigator.appVersion:""},e.networkInterfaces=e.getNetworkInterfaces=function(){return{}},e.arch=function(){return"javascript"},e.platform=function(){return"browser"},e.tmpdir=e.tmpDir=function(){return"/tmp"},e.EOL="\n",e.homedir=function(){return"/"}},8975:function(t,e,n){var r;!function(){"use strict";var s={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(t){return c(u(t),arguments)}function i(t,e){return o.apply(null,[t].concat(e||[]))}function c(t,e){var n,r,i,c,a,u,d,h,l,p=1,f=t.length,g="";for(r=0;r<f;r++)if("string"===typeof t[r])g+=t[r];else if("object"===typeof t[r]){if(c=t[r],c.keys)for(n=e[p],i=0;i<c.keys.length;i++){if(void 0==n)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',c.keys[i],c.keys[i-1]));n=n[c.keys[i]]}else n=c.param_no?e[c.param_no]:e[p++];if(s.not_type.test(c.type)&&s.not_primitive.test(c.type)&&n instanceof Function&&(n=n()),s.numeric_arg.test(c.type)&&"number"!==typeof n&&isNaN(n))throw new TypeError(o("[sprintf] expecting number but found %T",n));switch(s.number.test(c.type)&&(h=n>=0),c.type){case"b":n=parseInt(n,10).toString(2);break;case"c":n=String.fromCharCode(parseInt(n,10));break;case"d":case"i":n=parseInt(n,10);break;case"j":n=JSON.stringify(n,null,c.width?parseInt(c.width):0);break;case"e":n=c.precision?parseFloat(n).toExponential(c.precision):parseFloat(n).toExponential();break;case"f":n=c.precision?parseFloat(n).toFixed(c.precision):parseFloat(n);break;case"g":n=c.precision?String(Number(n.toPrecision(c.precision))):parseFloat(n);break;case"o":n=(parseInt(n,10)>>>0).toString(8);break;case"s":n=String(n),n=c.precision?n.substring(0,c.precision):n;break;case"t":n=String(!!n),n=c.precision?n.substring(0,c.precision):n;break;case"T":n=Object.prototype.toString.call(n).slice(8,-1).toLowerCase(),n=c.precision?n.substring(0,c.precision):n;break;case"u":n=parseInt(n,10)>>>0;break;case"v":n=n.valueOf(),n=c.precision?n.substring(0,c.precision):n;break;case"x":n=(parseInt(n,10)>>>0).toString(16);break;case"X":n=(parseInt(n,10)>>>0).toString(16).toUpperCase();break}s.json.test(c.type)?g+=n:(!s.number.test(c.type)||h&&!c.sign?l="":(l=h?"+":"-",n=n.toString().replace(s.sign,"")),u=c.pad_char?"0"===c.pad_char?"0":c.pad_char.charAt(1):" ",d=c.width-(l+n).length,a=c.width&&d>0?u.repeat(d):"",g+=c.align?l+n+a:"0"===u?l+a+n:a+l+n)}return g}var a=Object.create(null);function u(t){if(a[t])return a[t];var e,n=t,r=[],o=0;while(n){if(null!==(e=s.text.exec(n)))r.push(e[0]);else if(null!==(e=s.modulo.exec(n)))r.push("%");else{if(null===(e=s.placeholder.exec(n)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){o|=1;var i=[],c=e[2],u=[];if(null===(u=s.key.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(u[1]);while(""!==(c=c.substring(u[0].length)))if(null!==(u=s.key_access.exec(c)))i.push(u[1]);else{if(null===(u=s.index_access.exec(c)))throw new SyntaxError("[sprintf] failed to parse named argument key");i.push(u[1])}e[2]=i}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}n=n.substring(e[0].length)}return a[t]=r}e.sprintf=o,e.vsprintf=i,"undefined"!==typeof window&&(window["sprintf"]=o,window["vsprintf"]=i,r=function(){return{sprintf:o,vsprintf:i}}.call(e,n,e,t),void 0===r||(t.exports=r))}()},50458:function(t,e,n){const r=n(31116),s=n(50590);t.exports=t=>({sink:r(t),source:s(t)})},79407:function(t,e,n){t.exports=n(50590),t.exports.source=n(50590),t.exports.sink=n(31116),t.exports.transform=n(95212),t.exports.duplex=n(50458)},31116:function(t,e,n){const r=n(22412);t.exports=t=>async e=>{e=r(e);const n=t=>{"function"===typeof t.return&&t.return()};let s=null,o=null;const i=t=>{s=t,o&&o(t),n(e)};let c=null,a=!1;const u=()=>{a=!0,c&&c()};let d=null,h=!1;const l=()=>{h=!0,d&&d()};let p=null;const f=()=>{p&&p()},g=()=>new Promise(((e,n)=>{c=p=e,o=n,t.once("drain",f)})),y=()=>(n(e),new Promise(((t,e)=>{if(a||h||s)return t();d=c=t,o=e}))),m=()=>{t.removeListener("error",i),t.removeListener("close",u),t.removeListener("finish",l),t.removeListener("drain",f)};t.once("error",i),t.once("close",u),t.once("finish",l);try{for await(const n of e){if(!t.writable||t.destroyed||s)break;!1===t.write(n)&&await g()}}catch(b){s||t.destroy(),s=b}try{if(t.writable&&t.end(),await y(),s)throw s}finally{m()}}},95212:function(t,e,n){const r=n(50458);t.exports=t=>async function*(e){const n=r(t);let s;if(n.sink(e).catch((t=>{s=t})),yield*n.source,s)throw s}},53781:function(t,e,n){"use strict";var r=n(34155),s=d;function o(t){var e=r;return n;function n(t){e(t||c)}function r(n){var o=[n];function c(t){o.push(t)}function u(t){var n=arguments;e=i(t)?r:c;while(o.length)c(o.shift());function c(t){s(a,t,n)}}e=c,t(u)}}function i(t){return"[object Error]"===Object.prototype.toString.call(t)}function c(){}function a(t,e){t.apply(null,e)}function u(t){42===t&&(s=r.nextTick)}function d(t,e,n){r.nextTick((function(){t(e,n)}))}r.nextTick(u,42),t.exports=o},71591:function(){},14863:function(){},69526:function(t,e){var n,r,s=function(t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.decode=h,t.encode=d,t.familyOf=u,t.name=void 0,t.sizeOf=a,t.v6=t.v4=void 0;const e=/^(\d{1,3}\.){3,3}\d{1,3}$/,n=4,r=/^(::)?(((\d{1,3}\.){3}(\d{1,3}){1})?([0-9a-f]){0,4}:{0,2}){1,8}(::)?$/i,s=16,o={name:"v4",size:n,isFormat:t=>e.test(t),encode(t,e,r){r=~~r,e=e||new Uint8Array(r+n);const s=t.length;let o=0;for(let n=0;n<s;){const s=t.charCodeAt(n++);46===s?(e[r++]=o,o=0):o=10*o+(s-48)}return e[r]=o,e},decode(t,e){return e=~~e,`${t[e++]}.${t[e++]}.${t[e++]}.${t[e]}`}};t.v4=o;const i={name:"v6",size:s,isFormat:t=>t.length>0&&r.test(t),encode(t,e,n){n=~~n;let r=n+s,o=-1,i=0,c=0,a=!0,u=!1;e=e||new Uint8Array(n+s);for(let s=0;s<t.length;s++){let d=t.charCodeAt(s);58===d?(a?-1!==o?(n<r&&(e[n]=0),n<r-1&&(e[n+1]=0),n+=2):n<r&&(o=n):(!0===u?(n<r&&(e[n]=c),n++):(n<r&&(e[n]=i>>8),n<r-1&&(e[n+1]=255&i),n+=2),i=0,c=0),a=!0,u=!1):46===d?(n<r&&(e[n]=c),n++,c=0,i=0,a=!1,u=!0):(a=!1,d>=97?d-=87:d>=65?d-=55:(d-=48,c=10*c+d),i=(i<<4)+d)}if(!1===a)!0===u?(n<r&&(e[n]=c),n++):(n<r&&(e[n]=i>>8),n<r-1&&(e[n+1]=255&i),n+=2);else if(0===o)n<r&&(e[n]=0),n<r-1&&(e[n+1]=0),n+=2;else if(-1!==o){n+=2;for(let t=Math.min(n-1,r-1);t>=o+2;t--)e[t]=e[t-2];e[o]=0,e[o+1]=0,o=n}if(o!==n&&-1!==o){n>r-2&&(n=r-2);while(r>o)e[--r]=n<r&&n>o?e[--n]:0}else while(n<r)e[n++]=0;return e},decode(t,e){e=~~e;let n="";for(let r=0;r<s;r+=2)0!==r&&(n+=":"),n+=(t[e+r]<<8|t[e+r+1]).toString(16);return n.replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}};t.v6=i;const c="ip";function a(t){if(o.isFormat(t))return o.size;if(i.isFormat(t))return i.size;throw Error(`Invalid ip address: ${t}`)}function u(t){return a(t)===o.size?1:2}function d(t,e,n){n=~~n;const r=a(t);return"function"===typeof e&&(e=e(n+r)),r===o.size?o.encode(t,e,n):i.encode(t,e,n)}function h(t,e,n){if(e=~~e,n=n||t.length-e,n===o.size)return o.decode(t,e,n);if(n===i.size)return i.decode(t,e,n);throw Error(`Invalid buffer size needs to be ${o.size} for v4 or ${i.size} for v6.`)}return t.name=c,"default"in t?t.default:t}({});n=[],r=function(){return s}.apply(e,n),void 0===r||(t.exports=r)},58928:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return Jt}});var r={};n.r(r),n.d(r,{simpleGroup:function(){return ft},spanAll:function(){return ht},spanAllZeroes:function(){return dt},spanLeadingZeroes:function(){return pt}});var s=n(75956),o=n(36350),i=n(24141),c=n(59040),a=n(46857),u=n(69860),d=n(67435),h=n(9824),l=n(23366);const p=(0,u.kg)("libp2p:mdns:query");function f(t,e,n){const r=()=>{p("query",e),t.query({questions:[{name:e,type:"PTR"}]})};return r(),setInterval(r,n)}function g(t,e,n){if(null==t.answers)return;const r={a:[],aaaa:[]};if(t.answers.forEach((t=>{switch(t.type){case"PTR":r.ptr=t;break;case"SRV":r.srv=t;break;case"TXT":r.txt=t;break;case"A":r.a.push(t);break;case"AAAA":r.aaaa.push(t);break;default:break}})),null==r.ptr||r.ptr.name!==n||null==r.txt||null==r.srv)return;const s=r.txt.data[0].toString(),o=r.srv.data.port,i=[];if(r.a.forEach((t=>{const e=(0,h.HM)(`/ip4/${t.data}/tcp/${o}`);i.some((t=>t.equals(e)))||i.push(e)})),r.aaaa.forEach((t=>{const e=(0,h.HM)(`/ip6/${t.data}/tcp/${o}`);i.some((t=>t.equals(e)))||i.push(e)})),e.toString()===s)return;const c=(0,l.jE)(s);return p("peer found %p",c),{id:c,multiaddrs:i,protocols:[]}}function y(t,e,n,r,s,o){if(!o)return void p("not responding to mDNS query as broadcast mode is false");const i=r.reduce(((t,e)=>(e.decapsulateCode((0,h.a_)("p2p").code).isThinWaistAddress()&&t.push(e.toOptions()),t)),[]);if(0!==i.length){if(null!=t.questions[0]&&t.questions[0].name===s){const t=[];t.push({name:s,type:"PTR",class:"IN",ttl:120,data:n.toString()+"."+s});const r=i[0].port;t.push({name:n.toString()+"."+s,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:r,target:d.hostname()}}),t.push({name:n.toString()+"."+s,type:"TXT",class:"IN",ttl:120,data:n.toString()}),i.forEach((e=>{[4,6].includes(e.family)&&t.push({name:d.hostname(),type:4===e.family?"A":"AAAA",class:"IN",ttl:120,data:e.host})})),p("responding to query"),e.respond(t)}}else p("no thin waist addresses present, cannot respond to query")}const m="_ipfs-discovery._udp",b=`${m}.local`,w="224.0.0.251",v=5353;var E=n(6949),I=n(48764)["Buffer"];const T=(0,u.kg)("libp2p:mdns:compat:responder");class A{constructor(){this.components=new E.z,this._onQuery=this._onQuery.bind(this)}init(t){this.components=t}start(){this._mdns=c(),this._mdns.on("query",this._onQuery)}_onQuery(t,e){const n=this.components.getAddressManager().getAddresses().reduce(((t,e)=>(e=e.decapsulateCode((0,h.a_)("p2p").code),e.isThinWaistAddress()&&t.push(e.toOptions()),t)),[]);if(0===n.length)return void T("no tcp addresses configured so cannot respond to mDNS query");const r=t.questions??[];if(!r.some((t=>t.name===b)))return;T.trace("got query",t,e);const s=[],o=`${this.components.getPeerId().toString()}.${b}`;s.push({name:b,type:"PTR",class:"IN",ttl:120,data:o}),s.push({name:o,type:"TXT",class:"IN",ttl:120,data:[I.from(this.components.getPeerId().toString())]}),n.forEach((t=>{[4,6].includes(t.family)&&(s.push({name:o,type:"SRV",class:"IN",ttl:120,data:{priority:10,weight:1,port:t.port,target:d.hostname()}}),s.push({name:d.hostname(),type:4===t.family?"A":"AAAA",class:"IN",ttl:120,data:t.host}))})),null!=this._mdns&&(T.trace("responding to query"),T.trace("query answers",s),this._mdns.respond(s,e))}stop(){if(null!=this._mdns)return this._mdns.removeListener("query",this._onQuery),new Promise((t=>{null!=this._mdns?this._mdns.destroy(t):t()}))}}const S=(0,u.kg)("libp2p:mdns:compat:utils");function B(t,e){const n=t.find((t=>"PTR"===t.type&&t.name===b));if(null==n)return;S.trace("got response",b);const r=t.find((t=>"TXT"===t.type));if(null==r||"TXT"!==r.type)return void S("missing TXT record in response");let s,o;try{s=r.data[0].toString()}catch(a){return void S("failed to extract peer ID from TXT record data",r,a)}try{o=(0,l.jE)(s)}catch(a){return void S("failed to create peer ID from TXT record data",s,a)}if(e.equals(o))return void S("ignoring reply to myself");const i=[],c={A:{},AAAA:{}};return t.forEach((t=>{"A"===t.type&&(c.A[t.name]=t.data),"AAAA"===t.type&&(c.AAAA[t.name]=t.data)})),t.forEach((t=>{"SRV"===t.type&&(null!=c.A[t.data.target]?i.push((0,h.HM)(`/ip4/${c.A[t.data.target]}/tcp/${t.data.port}/p2p/${o.toString()}`)):null!=c.AAAA[t.data.target]?i.push((0,h.HM)(`/ip6/${c.AAAA[t.data.target]}/tcp/${t.data.port}/p2p/${o.toString()}`)):i.push((0,h.HM)(`/dnsaddr/${t.data.target}/tcp/${t.data.port}/p2p/${o.toString()}`)))})),{id:o,multiaddrs:i,protocols:[]}}var _=n(59769);const D=(0,u.kg)("libp2p:mdns:compat:querier");class L extends a.v{constructor(t={}){super(),this.components=new E.z;const{queryInterval:e,queryPeriod:n}=t;this._init={queryInterval:e??6e4,queryPeriod:Math.min(e??6e4,n??5e3)},this._onResponse=this._onResponse.bind(this)}get[_.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/go-mdns-querier"}init(t){this.components=t}isStarted(){return Boolean(this._handle)}start(){this._handle=R((()=>{const t=c({multicast:!1,interface:"0.0.0.0",port:0});return t.on("response",this._onResponse),t.query({id:U(),questions:[{name:b,type:"PTR",class:"IN"}]},null,{address:w,port:v}),{stop:async()=>(t.removeListener("response",this._onResponse),await new Promise((e=>t.destroy(e))))}}),{period:this._init.queryPeriod,interval:this._init.queryInterval})}_onResponse(t,e){D.trace("received mDNS query response");const n=t.answers??[],r=B(n,this.components.getPeerId());null!=r?0!==r.multiaddrs.length?(D("discovered peer in mDNS qeury response %p",r.id),this.dispatchEvent(new a.A("peer",{detail:r}))):D("could not parse multiaddrs from mDNS response"):D("could not read peer data from query response")}async stop(){null!=this._handle&&await this._handle.stop()}}function R(t,e){let n,r,s=!1;const o=()=>{n=t(),r=setTimeout((()=>{null!=n&&n.stop().catch(D),s||(r=setTimeout(o,e.interval)),n=null}),e.period)};return o(),{async stop(){s=!0,clearTimeout(r),null!=n&&await n.stop()}}}const U=(()=>{let t=0;return()=>(t++,t===Number.MAX_SAFE_INTEGER&&(t=1),t)})();class O extends a.v{constructor(t={}){super();const{queryPeriod:e,queryInterval:n}=t;this._started=!1,this._responder=new A,this._querier=new L({queryInterval:n,queryPeriod:e}),this._querier.addEventListener("peer",(t=>{this.dispatchEvent(new a.A("peer",{detail:t.detail}))}))}get[_.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/go-mdns"}init(t){this._responder.init(t),this._querier.init(t)}isStarted(){return this._started}async start(){this.isStarted()||(this._started=!0,await Promise.all([this._responder.start(),this._querier.start()]))}async stop(){this.isStarted()&&(this._started=!1,await Promise.all([this._responder.stop(),this._querier.stop()]))}}const k=(0,u.kg)("libp2p:mdns");class M extends a.v{constructor(t={}){super(),this.components=new E.z,this.broadcast=!1!==t.broadcast,this.interval=t.interval??1e4,this.serviceTag=t.serviceTag??"ipfs.local",this.port=t.port??5353,this._queryInterval=null,this._onPeer=this._onPeer.bind(this),this._onMdnsQuery=this._onMdnsQuery.bind(this),this._onMdnsResponse=this._onMdnsResponse.bind(this),!1!==t.compat&&(this._goMdns=new O({queryPeriod:t.compatQueryPeriod,queryInterval:t.compatQueryInterval}),this._goMdns.addEventListener("peer",this._onPeer))}get[_.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/mdns"}init(t){this.components=t,this._goMdns?.init(t)}isStarted(){return Boolean(this.mdns)}async start(){null==this.mdns&&(this.mdns=c({port:this.port}),this.mdns.on("query",this._onMdnsQuery),this.mdns.on("response",this._onMdnsResponse),this._queryInterval=f(this.mdns,this.serviceTag,this.interval),null!=this._goMdns&&await this._goMdns.start())}_onMdnsQuery(t){null!=this.mdns&&(k.trace("received incoming mDNS query"),y(t,this.mdns,this.components.getPeerId(),this.components.getAddressManager().getAddresses(),this.serviceTag,this.broadcast))}_onMdnsResponse(t){k.trace("received mDNS query response");try{const e=g(t,this.components.getPeerId(),this.serviceTag);null!=e&&(k("discovered peer in mDNS qeury response %p",e.id),this.dispatchEvent(new a.A("peer",{detail:e})))}catch(e){k.error("Error processing peer response",e)}}_onPeer(t){null!=this.mdns&&this.dispatchEvent(new a.A("peer",{detail:t.detail}))}async stop(){null!=this.mdns&&(this.mdns.removeListener("query",this._onMdnsQuery),this.mdns.removeListener("response",this._onMdnsResponse),this._goMdns?.removeEventListener("peer",this._onPeer),null!=this._queryInterval&&(clearInterval(this._queryInterval),this._queryInterval=null),await Promise.all([this._goMdns?.stop(),new Promise((t=>{null!=this.mdns?this.mdns.destroy(t):t()}))]),this.mdns=void 0)}}var N=n(92499),P=n(92410),C=n(71591),x=n(76237),$=n(32114);class q extends Error{constructor(t,e){super(t??"The operation was aborted"),this.type="aborted",this.code=e??"ABORT_ERR"}}function F(t){if(null!=t){if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"===typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}function j(t,e,n){const r=n??{},s=F(t);async function*o(){let n;const o=()=>{null!=n&&n()};e.addEventListener("abort",o);while(1){let c;try{if(e.aborted){const{abortMessage:t,abortCode:e}=r;throw new q(t,e)}const t=new Promise(((t,e)=>{n=()=>{const{abortMessage:t,abortCode:n}=r;e(new q(t,n))}}));c=await Promise.race([t,s.next()]),n=null}catch(i){e.removeEventListener("abort",o);const n="aborted"===i.type&&e.aborted;if(n&&null!=r.onAbort&&await r.onAbort(t),"function"===typeof s.return)try{const t=s.return();t instanceof Promise&&t.catch((t=>{null!=r.onReturnError&&r.onReturnError(t)}))}catch(i){null!=r.onReturnError&&r.onReturnError(i)}if(n&&!0===r.returnOnAbort)return;throw i}if(!0===c.done)break;yield c.value}e.removeEventListener("abort",o)}return o()}var V=n(79407);function H(t){return!(this.subnetMask<t.subnetMask)&&this.mask(t.subnetMask)===t.mask()}function X(t){return function(){return this.addressMinusSuffix===this.correctForm()&&(this.subnetMask===t&&!this.parsedSubnet||this.parsedSubnet===String(this.subnetMask))}}const z=32,G=4,Y=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/g,K=/\/\d{1,2}$/;class Z extends Error{constructor(t,e){super(t),this.name="AddressError",null!==e&&(this.parseMessage=e)}}var Q=n(75215),W=n(8975);class J{constructor(t){this.groups=G,this.parsedAddress=[],this.parsedSubnet="",this.subnet="/32",this.subnetMask=32,this.v4=!0,this.isCorrect=X(z),this.isInSubnet=H,this.address=t;const e=K.exec(t);if(e){if(this.parsedSubnet=e[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,this.subnetMask<0||this.subnetMask>z)throw new Z("Invalid subnet mask.");t=t.replace(K,"")}this.addressMinusSuffix=t,this.parsedAddress=this.parse(t)}static isValid(t){try{return new J(t),!0}catch(e){return!1}}parse(t){const e=t.split(".");if(!t.match(Y))throw new Z("Invalid IPv4 address.");return e}correctForm(){return this.parsedAddress.map((t=>parseInt(t,10))).join(".")}static fromHex(t){const e=t.replace(/:/g,"").padStart(8,"0"),n=[];let r;for(r=0;r<8;r+=2){const t=e.slice(r,r+2);n.push(parseInt(t,16))}return new J(n.join("."))}static fromInteger(t){return J.fromHex(t.toString(16))}static fromArpa(t){const e=t.replace(/(\.in-addr\.arpa)?\.$/,""),n=e.split(".").reverse().join(".");return new J(n)}toHex(){return this.parsedAddress.map((t=>(0,W.sprintf)("%02x",parseInt(t,10)))).join(":")}toArray(){return this.parsedAddress.map((t=>parseInt(t,10)))}toGroup6(){const t=[];let e;for(e=0;e<G;e+=2){const n=(0,W.sprintf)("%02x%02x",parseInt(this.parsedAddress[e],10),parseInt(this.parsedAddress[e+1],10));t.push((0,W.sprintf)("%x",parseInt(n,16)))}return t.join(":")}bigInteger(){return new Q.BigInteger(this.parsedAddress.map((t=>(0,W.sprintf)("%02x",parseInt(t,10)))).join(""),16)}_startAddress(){return new Q.BigInteger(this.mask()+"0".repeat(z-this.subnetMask),2)}startAddress(){return J.fromBigInteger(this._startAddress())}startAddressExclusive(){const t=new Q.BigInteger("1");return J.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new Q.BigInteger(this.mask()+"1".repeat(z-this.subnetMask),2)}endAddress(){return J.fromBigInteger(this._endAddress())}endAddressExclusive(){const t=new Q.BigInteger("1");return J.fromBigInteger(this._endAddress().subtract(t))}static fromBigInteger(t){return J.fromInteger(parseInt(t.toString(),10))}mask(t){return void 0===t&&(t=this.subnetMask),this.getBitsBase2(0,t)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}reverseForm(t){t||(t={});const e=this.correctForm().split(".").reverse().join(".");return t.omitSuffix?e:(0,W.sprintf)("%s.in-addr.arpa.",e)}isMulticast(){return this.isInSubnet(new J("224.0.0.0/4"))}binaryZeroPad(){return this.bigInteger().toString(2).padStart(z,"0")}groupForV6(){const t=this.parsedAddress;return this.address.replace(Y,(0,W.sprintf)('<span class="hover-group group-v4 group-6">%s</span>.<span class="hover-group group-v4 group-7">%s</span>',t.slice(0,2).join("."),t.slice(2,4).join(".")))}}const tt=128,et=8,nt={0:"Reserved",1:"Interface local",2:"Link local",4:"Admin local",5:"Site local",8:"Organization local",14:"Global",15:"Reserved"},rt={"ff01::1/128":"Multicast (All nodes on this interface)","ff01::2/128":"Multicast (All routers on this interface)","ff02::1/128":"Multicast (All nodes on this link)","ff02::2/128":"Multicast (All routers on this link)","ff05::2/128":"Multicast (All routers in this site)","ff02::5/128":"Multicast (OSPFv3 AllSPF routers)","ff02::6/128":"Multicast (OSPFv3 AllDR routers)","ff02::9/128":"Multicast (RIP routers)","ff02::a/128":"Multicast (EIGRP routers)","ff02::d/128":"Multicast (PIM routers)","ff02::16/128":"Multicast (MLDv2 reports)","ff01::fb/128":"Multicast (mDNSv6)","ff02::fb/128":"Multicast (mDNSv6)","ff05::fb/128":"Multicast (mDNSv6)","ff02::1:2/128":"Multicast (All DHCP servers and relay agents on this link)","ff05::1:2/128":"Multicast (All DHCP servers and relay agents in this site)","ff02::1:3/128":"Multicast (All DHCP servers on this link)","ff05::1:3/128":"Multicast (All DHCP servers in this site)","::/128":"Unspecified","::1/128":"Loopback","ff00::/8":"Multicast","fe80::/10":"Link-local unicast"},st=/([^0-9a-f:/%])/gi,ot=/([0-9a-f]{5,}|:{3,}|[^:]:$|^:[^:]|\/$)/gi,it=/\/\d{1,3}(?=%|$)/,ct=/%.*$/,at=new RegExp(/^\[{0,1}([0-9a-f:]+)\]{0,1}/),ut=new RegExp(/\[([0-9a-f:]+)\]:([0-9]{1,5})/);function dt(t){return t.replace(/(0+)/g,'<span class="zero">$1</span>')}function ht(t,e=0){const n=t.split("");return n.map(((t,n)=>(0,W.sprintf)('<span class="digit value-%s position-%d">%s</span>',t,n+e,dt(t)))).join("")}function lt(t){return t.replace(/^(0+)/,'<span class="zero">$1</span>')}function pt(t){const e=t.split(":");return e.map((t=>lt(t))).join(":")}function ft(t,e=0){const n=t.split(":");return n.map(((t,n)=>/group-v4/.test(t)?t:(0,W.sprintf)('<span class="hover-group group-%d">%s</span>',n+e,lt(t))))}function gt(t){return(0,W.sprintf)("(%s)",t.join("|"))}function yt(t){return t.length<4?(0,W.sprintf)("0{0,%d}%s",4-t.length,t):t}const mt="[^A-Fa-f0-9:]";function bt(t){const e=[];t.forEach(((t,n)=>{const r=parseInt(t,16);0===r&&e.push(n)}));const n=e.map((e=>t.map(((t,n)=>{if(n===e){const e=0===n||n===et-1?":":"";return gt([yt(t),e])}return yt(t)})).join(":")));return n.push(t.map(yt).join(":")),gt(n)}function wt(t,e,n){const r=e?"":":",s=n?"":":",o=[];e||n||o.push("::"),e&&n&&o.push(""),(n&&!e||!n&&e)&&o.push(":"),o.push((0,W.sprintf)("%s(:0{1,4}){1,%d}",r,t-1)),o.push((0,W.sprintf)("(0{1,4}:){1,%d}%s",t-1,s)),o.push((0,W.sprintf)("(0{1,4}:){%d}0{1,4}",t-1));for(let i=1;i<t-1;i++)for(let e=1;e<t-i;e++)o.push((0,W.sprintf)("(0{1,4}:){%d}:(0{1,4}:){%d}0{1,4}",e,t-e-i-1));return gt(o)}function vt(t){if(!t)throw new Error("Assertion failed.")}function Et(t){const e=/(\d+)(\d{3})/;while(e.test(t))t=t.replace(e,"$1,$2");return t}function It(t){return t=t.replace(/^(0{1,})([1-9]+)$/,'<span class="parse-error">$1</span>$2'),t=t.replace(/^(0{1,})(0)$/,'<span class="parse-error">$1</span>$2'),t}function Tt(t,e){const n=[],r=[];let s;for(s=0;s<t.length;s++)s<e[0]?n.push(t[s]):s>e[1]&&r.push(t[s]);return n.concat(["compact"]).concat(r)}function At(t){return(0,W.sprintf)("%04x",parseInt(t,16))}function St(t){return 255&t}class Bt{constructor(t,e){this.addressMinusSuffix="",this.parsedSubnet="",this.subnet="/128",this.subnetMask=128,this.v4=!1,this.zone="",this.isInSubnet=H,this.isCorrect=X(tt),this.groups=void 0===e?et:e,this.address=t;const n=it.exec(t);if(n){if(this.parsedSubnet=n[0].replace("/",""),this.subnetMask=parseInt(this.parsedSubnet,10),this.subnet=`/${this.subnetMask}`,Number.isNaN(this.subnetMask)||this.subnetMask<0||this.subnetMask>tt)throw new Z("Invalid subnet mask.");t=t.replace(it,"")}else if(/\//.test(t))throw new Z("Invalid subnet mask.");const r=ct.exec(t);r&&(this.zone=r[0],t=t.replace(ct,"")),this.addressMinusSuffix=t,this.parsedAddress=this.parse(this.addressMinusSuffix)}static isValid(t){try{return new Bt(t),!0}catch(e){return!1}}static fromBigInteger(t){const e=t.toString(16).padStart(32,"0"),n=[];let r;for(r=0;r<et;r++)n.push(e.slice(4*r,4*(r+1)));return new Bt(n.join(":"))}static fromURL(t){let e,n,r=null;if(-1!==t.indexOf("[")&&-1!==t.indexOf("]:")){if(n=ut.exec(t),null===n)return{error:"failed to parse address with port",address:null,port:null};e=n[1],r=n[2]}else if(-1!==t.indexOf("/")){if(t=t.replace(/^[a-z0-9]+:\/\//,""),n=at.exec(t),null===n)return{error:"failed to parse address from URL",address:null,port:null};e=n[1]}else e=t;return r?(r=parseInt(r,10),(r<0||r>65536)&&(r=null)):r=null,{address:new Bt(e),port:r}}static fromAddress4(t){const e=new J(t),n=tt-(z-e.subnetMask);return new Bt(`::ffff:${e.correctForm()}/${n}`)}static fromArpa(t){let e=t.replace(/(\.ip6\.arpa)?\.$/,"");const n=7;if(63!==e.length)throw new Z("Invalid 'ip6.arpa' form.");const r=e.split(".").reverse();for(let s=n;s>0;s--){const t=4*s;r.splice(t,0,":")}return e=r.join(""),new Bt(e)}microsoftTranscription(){return(0,W.sprintf)("%s.ipv6-literal.net",this.correctForm().replace(/:/g,"-"))}mask(t=this.subnetMask){return this.getBitsBase2(0,t)}possibleSubnets(t=128){const e=tt-this.subnetMask,n=Math.abs(t-tt),r=e-n;return r<0?"0":Et(new Q.BigInteger("2",10).pow(r).toString(10))}_startAddress(){return new Q.BigInteger(this.mask()+"0".repeat(tt-this.subnetMask),2)}startAddress(){return Bt.fromBigInteger(this._startAddress())}startAddressExclusive(){const t=new Q.BigInteger("1");return Bt.fromBigInteger(this._startAddress().add(t))}_endAddress(){return new Q.BigInteger(this.mask()+"1".repeat(tt-this.subnetMask),2)}endAddress(){return Bt.fromBigInteger(this._endAddress())}endAddressExclusive(){const t=new Q.BigInteger("1");return Bt.fromBigInteger(this._endAddress().subtract(t))}getScope(){let t=nt[this.getBits(12,16).intValue()];return"Global unicast"===this.getType()&&"Link local"!==t&&(t="Global"),t||"Unknown"}getType(){for(const t of Object.keys(rt))if(this.isInSubnet(new Bt(t)))return rt[t];return"Global unicast"}getBits(t,e){return new Q.BigInteger(this.getBitsBase2(t,e),2)}getBitsBase2(t,e){return this.binaryZeroPad().slice(t,e)}getBitsBase16(t,e){const n=e-t;if(n%4!==0)throw new Error("Length of bits to retrieve must be divisible by four");return this.getBits(t,e).toString(16).padStart(n/4,"0")}getBitsPastSubnet(){return this.getBitsBase2(this.subnetMask,tt)}reverseForm(t){t||(t={});const e=Math.floor(this.subnetMask/4),n=this.canonicalForm().replace(/:/g,"").split("").slice(0,e).reverse().join(".");return e>0?t.omitSuffix?n:(0,W.sprintf)("%s.ip6.arpa.",n):t.omitSuffix?"":"ip6.arpa."}correctForm(){let t,e=[],n=0;const r=[];for(t=0;t<this.parsedAddress.length;t++){const e=parseInt(this.parsedAddress[t],16);0===e&&n++,0!==e&&n>0&&(n>1&&r.push([t-n,t-1]),n=0)}n>1&&r.push([this.parsedAddress.length-n,this.parsedAddress.length-1]);const s=r.map((t=>t[1]-t[0]+1));if(r.length>0){const t=s.indexOf(Math.max(...s));e=Tt(this.parsedAddress,r[t])}else e=this.parsedAddress;for(t=0;t<e.length;t++)"compact"!==e[t]&&(e[t]=parseInt(e[t],16).toString(16));let o=e.join(":");return o=o.replace(/^compact$/,"::"),o=o.replace(/^compact|compact$/,":"),o=o.replace(/compact/,""),o}binaryZeroPad(){return this.bigInteger().toString(2).padStart(tt,"0")}parse4in6(t){const e=t.split(":"),n=e.slice(-1)[0],r=n.match(Y);if(r){this.parsedAddress4=r[0],this.address4=new J(this.parsedAddress4);for(let e=0;e<this.address4.groups;e++)if(/^0[0-9]+/.test(this.address4.parsedAddress[e]))throw new Z("IPv4 addresses can't have leading zeroes.",t.replace(Y,this.address4.parsedAddress.map(It).join(".")));this.v4=!0,e[e.length-1]=this.address4.toGroup6(),t=e.join(":")}return t}parse(t){t=this.parse4in6(t);const e=t.match(st);if(e)throw new Z((0,W.sprintf)("Bad character%s detected in address: %s",e.length>1?"s":"",e.join("")),t.replace(st,'<span class="parse-error">$1</span>'));const n=t.match(ot);if(n)throw new Z((0,W.sprintf)("Address failed regex: %s",n.join("")),t.replace(ot,'<span class="parse-error">$1</span>'));let r=[];const s=t.split("::");if(2===s.length){let t=s[0].split(":"),e=s[1].split(":");1===t.length&&""===t[0]&&(t=[]),1===e.length&&""===e[0]&&(e=[]);const n=this.groups-(t.length+e.length);if(!n)throw new Z("Error parsing groups");this.elidedGroups=n,this.elisionBegin=t.length,this.elisionEnd=t.length+this.elidedGroups,r=r.concat(t);for(let s=0;s<n;s++)r.push("0");r=r.concat(e)}else{if(1!==s.length)throw new Z("Too many :: groups found");r=t.split(":"),this.elidedGroups=0}if(r=r.map((t=>(0,W.sprintf)("%x",parseInt(t,16)))),r.length!==this.groups)throw new Z("Incorrect number of groups found");return r}canonicalForm(){return this.parsedAddress.map(At).join(":")}decimal(){return this.parsedAddress.map((t=>(0,W.sprintf)("%05d",parseInt(t,16)))).join(":")}bigInteger(){return new Q.BigInteger(this.parsedAddress.map(At).join(""),16)}to4(){const t=this.binaryZeroPad().split("");return J.fromHex(new Q.BigInteger(t.slice(96,128).join(""),2).toString(16))}to4in6(){const t=this.to4(),e=new Bt(this.parsedAddress.slice(0,6).join(":"),6),n=e.correctForm();let r="";return/:$/.test(n)||(r=":"),n+r+t.address}inspectTeredo(){const t=this.getBitsBase16(0,32),e=this.getBits(80,96).xor(new Q.BigInteger("ffff",16)).toString(),n=J.fromHex(this.getBitsBase16(32,64)),r=J.fromHex(this.getBits(96,128).xor(new Q.BigInteger("ffffffff",16)).toString(16)),s=this.getBits(64,80),o=this.getBitsBase2(64,80),i=s.testBit(15),c=s.testBit(14),a=s.testBit(8),u=s.testBit(9),d=new Q.BigInteger(o.slice(2,6)+o.slice(8,16),2).toString(10);return{prefix:(0,W.sprintf)("%s:%s",t.slice(0,4),t.slice(4,8)),server4:n.address,client4:r.address,flags:o,coneNat:i,microsoft:{reserved:c,universalLocal:u,groupIndividual:a,nonce:d},udpPort:e}}inspect6to4(){const t=this.getBitsBase16(0,16),e=J.fromHex(this.getBitsBase16(16,48));return{prefix:(0,W.sprintf)("%s",t.slice(0,4)),gateway:e.address}}to6to4(){if(!this.is4())return null;const t=["2002",this.getBitsBase16(96,112),this.getBitsBase16(112,128),"","/16"].join(":");return new Bt(t)}toByteArray(){const t=this.bigInteger().toByteArray();return 17===t.length&&0===t[0]?t.slice(1):t}toUnsignedByteArray(){return this.toByteArray().map(St)}static fromByteArray(t){return this.fromUnsignedByteArray(t.map(St))}static fromUnsignedByteArray(t){const e=new Q.BigInteger("256",10);let n=new Q.BigInteger("0",10),r=new Q.BigInteger("1",10);for(let s=t.length-1;s>=0;s--)n=n.add(r.multiply(new Q.BigInteger(t[s].toString(10),10))),r=r.multiply(e);return Bt.fromBigInteger(n)}isCanonical(){return this.addressMinusSuffix===this.canonicalForm()}isLinkLocal(){return"1111111010000000000000000000000000000000000000000000000000000000"===this.getBitsBase2(0,64)}isMulticast(){return"Multicast"===this.getType()}is4(){return this.v4}isTeredo(){return this.isInSubnet(new Bt("2001::/32"))}is6to4(){return this.isInSubnet(new Bt("2002::/16"))}isLoopback(){return"Loopback"===this.getType()}href(t){return t=void 0===t?"":(0,W.sprintf)(":%s",t),(0,W.sprintf)("http://[%s]%s/",this.correctForm(),t)}link(t){t||(t={}),void 0===t.className&&(t.className=""),void 0===t.prefix&&(t.prefix="/#address="),void 0===t.v4&&(t.v4=!1);let e=this.correctForm;return t.v4&&(e=this.to4in6),t.className?(0,W.sprintf)('<a href="%1$s%2$s" class="%3$s">%2$s</a>',t.prefix,e.call(this),t.className):(0,W.sprintf)('<a href="%1$s%2$s">%2$s</a>',t.prefix,e.call(this))}group(){if(0===this.elidedGroups)return ft(this.address).join(":");vt("number"===typeof this.elidedGroups),vt("number"===typeof this.elisionBegin);const t=[],[e,n]=this.address.split("::");e.length?t.push(...ft(e)):t.push("");const r=["hover-group"];for(let s=this.elisionBegin;s<this.elisionBegin+this.elidedGroups;s++)r.push((0,W.sprintf)("group-%d",s));return t.push((0,W.sprintf)('<span class="%s"></span>',r.join(" "))),n.length?t.push(...ft(n,this.elisionEnd)):t.push(""),this.is4()&&(vt(this.address4 instanceof J),t.pop(),t.push(this.address4.groupForV6())),t.join(":")}regularExpressionString(t=!1){let e=[];const n=new Bt(this.correctForm());if(0===n.elidedGroups)e.push(bt(n.parsedAddress));else if(n.elidedGroups===et)e.push(wt(et));else{const t=n.address.split("::");t[0].length&&e.push(bt(t[0].split(":"))),vt("number"===typeof n.elidedGroups),e.push(wt(n.elidedGroups,0!==t[0].length,0!==t[1].length)),t[1].length&&e.push(bt(t[1].split(":"))),e=[e.join(":")]}return t||(e=["(?=^|",mt,"|[^\\w\\:])(",...e,")(?=[^\\w\\:]|",mt,"|$)"]),e.join("")}regularExpression(t=!1){return new RegExp(this.regularExpressionString(t),"i")}}const _t=(0,u.kg)("libp2p:ip-port-to-multiaddr"),Dt={ERR_INVALID_IP_PARAMETER:"ERR_INVALID_IP_PARAMETER",ERR_INVALID_PORT_PARAMETER:"ERR_INVALID_PORT_PARAMETER",ERR_INVALID_IP:"ERR_INVALID_IP"};function Lt(t,e){if("string"!==typeof t)throw $(new Error(`invalid ip provided: ${t}`),Dt.ERR_INVALID_IP_PARAMETER);if("string"===typeof e&&(e=parseInt(e)),isNaN(e))throw $(new Error(`invalid port provided: ${e}`),Dt.ERR_INVALID_PORT_PARAMETER);try{return new J(t),(0,h.HM)(`/ip4/${t}/tcp/${e}`)}catch{}try{const n=new Bt(t);return n.is4()?(0,h.HM)(`/ip4/${n.to4().correctForm()}/tcp/${e}`):(0,h.HM)(`/ip6/${t}/tcp/${e}`)}catch(n){const r=`invalid ip:port for creating a multiaddr: ${t}:${e}`;throw _t.error(r),$(new Error(r),Dt.ERR_INVALID_IP)}}const Rt=421,Ut=290,Ot=400,kt=2e3,Mt=3e4;var Nt=n(26470);const Pt={ip4:"IPv4",ip6:"IPv6"};function Ct(t){const e=t.getPath();return null!=e?"win32"===d.platform()?{path:Nt.join("\\\\.\\pipe\\",e)}:{path:e}:t.toOptions()}function xt(t,e,n){const r=e=>(0,h.HM)(`/${t}/${e}/tcp/${n}`);return($t(e)?Ft(Pt[t]):[e]).map(r)}function $t(t){return["0.0.0.0","::"].includes(t)}const qt=d.networkInterfaces();function Ft(t){const e=[];for(const[,n]of Object.entries(qt))if(null!=n)for(const r of n)r.family===t&&e.push(r.address);return e}const jt=(0,u.kg)("libp2p:tcp:socket"),Vt=(t,e)=>{e=e??{};const n=e.socketInactivityTimeout??Mt,r=e.socketCloseTimeout??kt;let s;if(null!=e.listeningAddr?.getPath()&&(e.remoteAddr=e.listeningAddr),null!=e.remoteAddr?.getPath()&&(e.localAddr=e.remoteAddr),null!=e.remoteAddr)s=e.remoteAddr;else{if(null==t.remoteAddress||null==t.remotePort)throw $(new Error("Could not determine remote address or port"),"ERR_NO_REMOTE_ADDRESS");s=Lt(t.remoteAddress,t.remotePort)}const o=Ct(s),i=o.path??`${o.host??""}:${o.port??""}`,{sink:c,source:a}=V.duplex(t);t.setTimeout(n,(()=>{let e;jt("%s socket read timeout",i),t.readable&&(e=$(new Error("Socket read timeout"),"ERR_SOCKET_READ_TIMEOUT")),t.destroy(e)})),t.once("close",(()=>{jt("%s socket read timeout",i),null==u.timeline.close&&(u.timeline.close=Date.now())})),t.once("end",(()=>{jt("socket ended",u.remoteAddr.toString())}));const u={async sink(n){null!=e?.signal&&(n=j(n,e.signal));try{await c(n)}catch(r){"aborted"!==r.type&&jt(r)}t.end()},source:null!=e.signal?j(a,e.signal):a,remoteAddr:s,timeline:{open:Date.now()},async close(){t.destroyed?jt("%s socket was already destroyed when trying to close",i):(jt("%s closing socket",i),await new Promise(((e,n)=>{const s=Date.now(),o=setTimeout((()=>{t.destroyed?(jt("%s is already destroyed",i),e()):(jt("%s socket close timeout after %dms, destroying it manually",i,Date.now()-s),t.destroy($(new Error("Socket close timeout"),"ERR_SOCKET_CLOSE_TIMEOUT")))}),r).unref();t.once("close",(()=>{jt("%s socket closed",i),clearTimeout(o),e()})),t.once("error",(e=>{jt("%s socket error",i,e),null==u.timeline.close&&(u.timeline.close=Date.now()),t.destroyed&&clearTimeout(o),n(e)})),t.setTimeout(r),t.end(),t.writableLength>0?t.once("drain",(()=>{jt("%s socket drained",i),t.destroy()})):t.destroy()})))}};return u},Ht=(0,u.kg)("libp2p:tcp:listener");async function Xt(t){try{await t.close()}catch(e){Ht.error("an error occurred closing the connection",e)}}function zt(t){const{handler:e,upgrader:n,socketInactivityTimeout:r,socketCloseTimeout:s}=t;let o,i;t.keepAlive=t.keepAlive??!0;const c=Object.assign(C.createServer(t,(t=>{let o;t.on("error",(t=>{Ht("socket error",t)}));try{o=Vt(t,{listeningAddr:i,socketInactivityTimeout:r,socketCloseTimeout:s})}catch(d){return void Ht.error("inbound connection failed",d)}Ht("new inbound connection %s",o.remoteAddr);try{n.upgradeInbound(o).then((n=>{Ht("inbound connection %s upgraded",o.remoteAddr),Gt(c,o,t),null!=e&&e(n),u.dispatchEvent(new a.A("connection",{detail:n}))})).catch((async t=>{Ht.error("inbound connection failed",t),await Xt(o)})).catch((t=>{Ht.error("closing inbound connection failed",t)}))}catch(d){Ht.error("inbound connection failed",d),Xt(o).catch((t=>{Ht.error("closing inbound connection failed",t)}))}})),{__connections:[]}),u=Object.assign(new a.v,{getAddrs:()=>{let t=[];const e=c.address();if(null==e)return[];if("string"===typeof e)t=[i];else try{i.toString().startsWith("/ip4")?t=t.concat(xt("ip4",e.address,e.port)):"IPv6"===e.family&&(t=t.concat(xt("ip6",e.address,e.port)))}catch(n){Ht.error("could not turn %s:%s into multiaddr",e.address,e.port,n)}return t.map((t=>null!=o?t.encapsulate(`/p2p/${o}`):t))},listen:async t=>(i=t,o=t.getPeerId(),null==o&&(i=t.decapsulateCode(Rt)),await new Promise(((t,e)=>{const n=Ct(i);c.listen(n,(n=>{if(null!=n)return e(n);Ht("Listening on %s",c.address()),t()}))}))),close:async()=>{c.listening&&(await Promise.all(c.__connections.map((async t=>await Xt(t)))),await new Promise(((t,e)=>{c.close((n=>null!=n?e(n):t()))})))}});return c.on("listening",(()=>u.dispatchEvent(new a.A("listening")))).on("error",(t=>u.dispatchEvent(new a.A("error",{detail:t})))).on("close",(()=>u.dispatchEvent(new a.A("close")))),u}function Gt(t,e,n){t.__connections.push(e);const r=()=>{t.__connections=t.__connections.filter((t=>t!==e))};n.once("close",r)}var Yt=n(52770),Kt=n(12348);const Zt=(0,u.kg)("libp2p:tcp");class Qt{constructor(t={}){this.opts=t}get[Kt.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/tcp"}async dial(t,e){e.keepAlive=e.keepAlive??!0;const n=await this._connect(t,e);n.on("error",(t=>{Zt("socket error",t)}));const r=Vt(n,{remoteAddr:t,signal:e.signal,socketInactivityTimeout:this.opts.outboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout});Zt("new outbound connection %s",r.remoteAddr);const s=await e.upgrader.upgradeOutbound(r);return Zt("outbound connection %s upgraded",r.remoteAddr),s}async _connect(t,e){if(!0===e.signal?.aborted)throw new Yt._;return await new Promise(((n,r)=>{const s=Date.now(),o=Ct(t),i=o.path??`${o.host??""}:${o.port}`;Zt("dialing %j",o);const c=C.connect(o),a=t=>{t.message=`connection error ${i}: ${t.message}`,l(t)},u=()=>{Zt("connection timeout %s",i);const t=$(new Error(`connection timeout after ${Date.now()-s}ms`),"ERR_CONNECT_TIMEOUT");c.emit("error",t)},d=()=>{Zt("connection opened %j",o),l()},h=()=>{Zt("connection aborted %j",o),c.destroy(),l(new Yt._)},l=t=>{if(c.removeListener("error",a),c.removeListener("timeout",u),c.removeListener("connect",d),null!=e.signal&&e.signal.removeEventListener("abort",h),null!=t)return r(t);n(c)};c.on("error",a),c.on("timeout",u),c.on("connect",d),null!=e.signal&&e.signal.addEventListener("abort",h)}))}createListener(t){return zt({...t,socketInactivityTimeout:this.opts.inboundSocketInactivityTimeout,socketCloseTimeout:this.opts.socketCloseTimeout})}filter(t){return t=Array.isArray(t)?t:[t],t.filter((t=>!t.protoCodes().includes(Ut)&&(!!t.protoCodes().includes(Ot)||x.yZ.matches(t.decapsulateCode(Rt)))))}}var Wt=async()=>({transport:[Qt,s.x,o.C,i.I],connectionEncryption:[new P.c],peerDiscovery:[M],dht:N.i}),Jt=Wt},24141:function(t,e,n){"use strict";n.d(e,{I:function(){return E}});var r=n(69860),s=n(76237),o=n(99086);const i=globalThis.fetch;globalThis.Headers,globalThis.Request,globalThis.Response;class c extends Error{constructor(t,e){super(t??"The operation was aborted"),this.type="aborted",this.code=e??"ABORT_ERR"}}function a(t){if(null!=t){if("function"===typeof t[Symbol.iterator])return t[Symbol.iterator]();if("function"===typeof t[Symbol.asyncIterator])return t[Symbol.asyncIterator]();if("function"===typeof t.next)return t}throw new Error("argument is not an iterator or iterable")}function u(t,e,n){const r=n??{},s=a(t);async function*o(){let n;const o=()=>{null!=n&&n()};e.addEventListener("abort",o);while(1){let a;try{if(e.aborted){const{abortMessage:t,abortCode:e}=r;throw new c(t,e)}const t=new Promise(((t,e)=>{n=()=>{const{abortMessage:t,abortCode:n}=r;e(new c(t,n))}}));a=await Promise.race([t,s.next()]),n=null}catch(i){e.removeEventListener("abort",o);const n="aborted"===i.type&&e.aborted;if(n&&null!=r.onAbort&&await r.onAbort(t),"function"===typeof s.return)try{const t=s.return();t instanceof Promise&&t.catch((t=>{null!=r.onReturnError&&r.onReturnError(t)}))}catch(i){null!=r.onReturnError&&r.onReturnError(i)}if(n&&!0===r.returnOnAbort)return;throw i}if(!0===a.done)break;yield a.value}e.removeEventListener("abort",o)}return o()}var d=n(92263),h=n(52217);const l=421,p=290,f=2e3,g=(0,r.kg)("libp2p:webrtc-direct:socket");function y(t,e){const{sink:n,source:r}=t,s={remoteAddr:e.remoteAddr,async sink(t){null!=e.signal&&(t=u(t,e.signal));try{await n(t)}catch(r){"aborted"!==r.type&&g.error(r)}},source:null!=e.signal?u(r,e.signal):r,timeline:{open:Date.now()},async close(){if(t.closed)return;const e=Date.now(),n=setTimeout((()=>{if(null!=s.remoteAddr){const{host:t,port:n}=s.remoteAddr.toOptions();g("timeout closing socket to %s:%s after %dms, destroying it manually",t,n,Date.now()-e)}t.closed||t.close().catch((t=>{g.error("could not close socket",t)}))}),f);try{await t.close()}finally{clearTimeout(n)}}};return t.addEventListener("close",(()=>{null==s.timeline.close&&(s.timeline.close=Date.now())}),{once:!0}),s}function m(){throw new Error("WebRTCDirect Servers can not be created in the browser!")}var b=n(96862),w=n(12348);const v=(0,r.kg)("libp2p:webrtc-direct");class E{constructor(t){this.initiatorOptions=t?.initiatorOptions,this.recieverOptions=t?.recieverOptions,this.wrtc=t?.wrtc}get[w.N](){return!0}get[Symbol.toStringTag](){return"@libp2p/webrtc-direct"}async dial(t,e){const n=await this._connect(t,e),r=y(n,{remoteAddr:t,signal:e.signal});v("new outbound connection %s",r.remoteAddr);const s=await e.upgrader.upgradeOutbound(r);return v("outbound connection %s upgraded",r.remoteAddr),s}async _connect(t,e){if(!0===e.signal?.aborted)throw new c;const n={initiator:!0,trickle:!1,...this.initiatorOptions};return null!=this.wrtc&&(n.wrtc=this.wrtc),await new Promise(((r,s)=>{let a;const u=t.toOptions();v("Dialing %s:%s",u.host,u.port);const l=new b.PD(n),p=t=>{const e=t.detail;if(!a){const t=`connection error ${u.host}:${u.port}: ${e.message}`;v.error(t),e.message=t,y(e)}},f=()=>{a=!0,v("connection opened %s:%s",u.host,u.port),y()},g=()=>{v.error("connection aborted %s:%s",u.host,u.port),l.close().finally((()=>{y(new c)}))},y=t=>{l.removeEventListener("error",p),l.removeEventListener("ready",f),e.signal?.removeEventListener("abort",g),null!=t?s(t):r(l)};l.addEventListener("error",p,{once:!0}),l.addEventListener("ready",f,{once:!0}),l.addEventListener("close",(()=>{l.removeEventListener("error",p)})),e.signal?.addEventListener("abort",g);const m=async t=>{if("offer"!==t.type)return;const e=JSON.stringify(t);let n=u.host;6!==u.family||n.startsWith("[")||(n=`[${n}]`);const r=`http://${n}:${u.port}`,c=`/?signal=${o.base58btc.encode((0,h.m)(e))}`,a=r+c;try{const t=await i(a),e=await t.text();if(""===e.trim())return;const n=o.base58btc.decode(e),r=(0,d.B)(n),s=JSON.parse(r);l.handleSignal(s)}catch(p){await l.close(p),s(p)}};l.addEventListener("signal",(t=>{const e=t.detail;m(e).catch((async t=>{await l.close(t)}))}))}))}createListener(t){return m({...t,receiverOptions:this.recieverOptions,wrtc:this.wrtc})}filter(t){return t=Array.isArray(t)?t:[t],t.filter((t=>!t.protoCodes().includes(p)&&s.Ih.matches(t.decapsulateCode(l))))}}}}]);